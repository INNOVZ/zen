(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9566],{63:(e,t,r)=>{"use strict";var a=r(7260);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},489:(e,t,r)=>{"use strict";r.d(t,{b:()=>i});var a=r(2115),n=r(8142),s=r(5155),o=a.forwardRef((e,t)=>(0,s.jsx)(n.sG.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null==(r=e.onMouseDown)||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));o.displayName="Label";var i=o},908:(e,t,r)=>{"use strict";r.d(t,{N:()=>o});var a=r(8090);let n="https://raoonyyrzzftdenvknfi.supabase.co",s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJhb29ueXlyenpmdGRlbnZrbmZpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAyNDM1NzcsImV4cCI6MjA2NTgxOTU3N30.3t9rTN6x533lihs8ebUVHu9kuayFl_m2b6liifW1B88";if(!n||!s)throw console.error("Missing Supabase environment variables:"),console.error("NEXT_PUBLIC_SUPABASE_URL:",n?"Set":"Missing"),console.error("NEXT_PUBLIC_SUPABASE_ANON_KEY:",s?"Set":"Missing"),Error("Missing required Supabase environment variables");let o=(0,a.UU)(n,s)},1643:(e,t,r)=>{"use strict";r.d(t,{F:()=>s,v:()=>o});var a=r(908);let n="http://localhost:8001",s=async()=>{var e,t,r,s;let{data:o,error:i}=await a.N.auth.getSession();if(i)throw console.debug("Auth session error:",i),Error("Authentication error. Please log in again.");let c=null==(e=o.session)?void 0:e.access_token,l=null==(r=o.session)||null==(t=r.user)?void 0:t.id;if(!c||!l)throw console.debug("No valid session found - user not authenticated"),Error("Not authenticated. Please log in again.");let d=null;try{let e=await fetch("".concat(n,"/api/users/profile"),{headers:{Authorization:"Bearer ".concat(c),"Content-Type":"application/json"}});e.ok&&(d=(null==(s=(await e.json()).user)?void 0:s.org_id)||null)}catch(e){console.debug("Failed to fetch user org_id:",e)}return{token:c,userId:l,orgId:d}},o=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:r,userId:a,orgId:o}=await s(),i={"Content-Type":"application/json",Authorization:"Bearer ".concat(r),"X-User-ID":a,"X-Request-ID":"req-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),...o&&{"X-Org-ID":o},...t.headers},c=i["X-Request-ID"];console.log("\uD83D\uDD0D [".concat(c,"] API Call:"),"".concat(n).concat(e),{userId:a.substring(0,8)+"...",orgId:(null==o?void 0:o.substring(0,8))+"...",method:t.method||"GET"});let l=Date.now();try{let r=await fetch("".concat(n).concat(e),{...t,headers:i}),a=Date.now()-l;if(console.log("⏱️ [".concat(c,"] Response:"),r.status,"(".concat(a,"ms)")),!r.ok){let a="",s=null,o=null;try{if((a=await r.text())&&(a.startsWith("{")||a.startsWith("[")))try{s=JSON.parse(a)}catch(e){o=e,console.warn("⚠️ [".concat(c,"] JSON parsing failed:"),e)}}catch(e){a="Failed to read error response",console.warn("⚠️ [".concat(c,"] Could not read error response:"),e)}let i={requestId:c,url:"".concat(n).concat(e),method:t.method||"GET",status:r.status,statusText:r.statusText,headers:Object.fromEntries(r.headers.entries()),errorData:s,errorText:a||"No error text",parseError:o instanceof Error?o.message:o?String(o):null,timestamp:new Date().toISOString(),responseTime:Date.now()-l},d={requestId:c,url:i.url,method:i.method,status:i.status,statusText:i.statusText,message:(null==s?void 0:s.message)||a||i.statusText||"Unknown error",timestamp:i.timestamp,fullErrorData:s,fullErrorText:a,responseHeaders:Object.fromEntries(r.headers.entries())},u=e.includes("/context-config"),h=e.includes("/organization");if(404===r.status&&(u||h)?console.debug("\uD83D\uDCDD [".concat(c,"] Endpoint not available (expected in development):"),{url:i.url,status:r.status,endpoint:u?"context-config":"organization"}):(console.error("❌ [".concat(c,"] API Error:"),d),console.error("\uD83D\uDCA5 [".concat(c,"] Request failed:"),{summary:"".concat(i.method," ").concat(i.url," -> ").concat(i.status," ").concat(i.statusText),error:(null==s?void 0:s.message)||a||"No error details available",responseHeaders:Object.fromEntries(r.headers.entries())})),401===r.status)throw Error("Authentication expired. Please log in again.");if(403===r.status)throw Error("Access denied. Please check your permissions.");if(404===r.status)throw Error("API endpoint not found: ".concat(e));else if(429===r.status)throw Error("Too many requests. Please try again later.");else if(r.status>=500)throw Error("Server error. Please try again later.");let m=(null==s?void 0:s.message)||a||r.statusText||"API error (".concat(r.status,")"),p=Error(m);throw p.status=r.status,p.statusText=r.statusText,p.url="".concat(n).concat(e),p.errorData=s,p.errorText=a,p}try{let e=await r.json();return console.log("✅ [".concat(c,"] Success:"),"object"==typeof e?"JSON response":e),e}catch(e){console.error("⚠️ [".concat(c,"] Failed to parse JSON response:"),e),console.error("⚠️ [".concat(c,"] Response status:"),r.status,r.statusText),console.error("⚠️ [".concat(c,"] Response headers:"),Object.fromEntries(r.headers.entries()));try{let e=await r.text();if(console.log("\uD83D\uDCC4 [".concat(c,"] Text response:"),e),!e||""===e.trim())return console.log("\uD83D\uDCC4 [".concat(c,"] Empty response - likely successful update")),{success:!0,message:"Update successful"};return{message:e}}catch(e){throw console.error("\uD83D\uDCA5 [".concat(c,"] Failed to read response as text:"),e),Error("Failed to parse server response")}}}catch(s){let r=Date.now()-l;if(s instanceof TypeError&&s.message.includes("Failed to fetch"))throw console.error("\uD83D\uDCA5 [".concat(c,"] Network error:"),{url:"".concat(n).concat(e),method:t.method||"GET",responseTime:"".concat(r,"ms")}),Error("Backend server unavailable. Please check your connection or try again later.");if(s instanceof Error&&(s.message.includes("ECONNREFUSED")||s.message.includes("network")||s.message.includes("timeout")))throw console.error("\uD83D\uDCA5 [".concat(c,"] Connection error:"),{error:s.message,url:"".concat(n).concat(e),method:t.method||"GET",responseTime:"".concat(r,"ms")}),Error("Unable to connect to server. Please try again later.");let a={error:s,errorMessage:s instanceof Error?s.message:"Unknown error",errorType:typeof s,url:"".concat(n).concat(e),method:t.method||"GET",responseTime:"".concat(r,"ms")};throw s&&"object"==typeof s&&0===Object.keys(s).length?(console.warn("⚠️ [".concat(c,"] Empty error object detected - this might be a successful request with parsing issues")),console.warn("⚠️ [".concat(c,"] Request details:"),{url:a.url,method:a.method,responseTime:a.responseTime})):console.error("\uD83D\uDCA5 [".concat(c,"] Request failed:"),a),s}}},1647:(e,t,r)=>{"use strict";r.d(t,{E:()=>i});var a=r(5155);r(2115);var n=r(3101),s=r(4269);let o=(0,n.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:r,...n}=e;return(0,a.jsx)("div",{className:(0,s.cn)(o({variant:r}),t),...n})}},1847:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var a=r(2115);let n=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},s=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:l="",children:d,iconNode:u,...h}=e;return(0,a.createElement)("svg",{ref:t,...o,width:n,height:n,stroke:r,strokeWidth:c?24*Number(i)/Number(n):i,className:s("lucide",l),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"},...h},[...u.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),c=(e,t)=>{let r=(0,a.forwardRef)((r,o)=>{let{className:c,...l}=r;return(0,a.createElement)(i,{ref:o,iconNode:t,className:s("lucide-".concat(n(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),c),...l})});return r.displayName=n(e),r}},2449:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>w});var a=r(5155),n=r(2115),s=r(63),o=r(6948),i=r(3998),c=r(5142),l=r(6444),d=r(1647),u=r(5917);let h=(0,r(1847).A)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var m=r(5626),p=r(5299),g=r(6132),f=r(2504),x=r(8720);let b=e=>{let{plans:t,selectedPlan:r,onPlanSelect:n,onNext:s}=e;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Select Subscription Plan"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Choose the plan for the user/organization"})]}),(0,a.jsx)("div",{className:"grid md:grid-cols-3 gap-4",children:Object.entries(t).map(e=>{let t,[s,i]=e;return(0,a.jsxs)(o.Zp,{className:"cursor-pointer transition-all ".concat(r===s?"ring-2 ring-blue-500 border-blue-500":"hover:border-gray-300"),onClick:()=>n(s),children:[(0,a.jsx)(o.aR,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(o.ZB,{className:"text-lg",children:i.name}),r===s&&(0,a.jsx)(d.E,{variant:"default",children:"Selected"})]})}),(0,a.jsxs)(o.Wu,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:["$",i.price_per_month,(0,a.jsx)("span",{className:"text-sm font-normal text-gray-500",children:"/month"})]}),(0,a.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("li",{className:"flex items-center",children:[(0,a.jsx)(u.A,{className:"w-4 h-4 text-green-500 mr-2"}),(t=i.monthly_token_limit,new Intl.NumberFormat().format(t))," tokens/month"]}),(0,a.jsxs)("li",{className:"flex items-center",children:[(0,a.jsx)(u.A,{className:"w-4 h-4 text-green-500 mr-2"}),i.max_chatbots," chatbots"]}),(0,a.jsxs)("li",{className:"flex items-center",children:[(0,a.jsx)(u.A,{className:"w-4 h-4 text-green-500 mr-2"}),i.max_documents_per_chatbot," documents per chatbot"]}),i.priority_support&&(0,a.jsxs)("li",{className:"flex items-center",children:[(0,a.jsx)(u.A,{className:"w-4 h-4 text-green-500 mr-2"}),"Priority support"]}),i.custom_branding&&(0,a.jsxs)("li",{className:"flex items-center",children:[(0,a.jsx)(u.A,{className:"w-4 h-4 text-green-500 mr-2"}),"Custom branding"]}),i.api_access&&(0,a.jsxs)("li",{className:"flex items-center",children:[(0,a.jsx)(u.A,{className:"w-4 h-4 text-green-500 mr-2"}),"API access"]})]})]})]},s)})}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsxs)(i.$,{onClick:s,disabled:!r,className:"bg-blue-600 hover:bg-blue-700",children:["Continue",(0,a.jsx)(h,{className:"w-4 h-4 ml-2"})]})})]})},y=e=>{let{formData:t,onFormDataChange:r,onNext:s,onBack:d}=e,[u,p]=(0,n.useState)(!0);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Account Information"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Enter details for the user or organization"})]}),(0,a.jsx)(o.Zp,{children:(0,a.jsx)(o.Wu,{className:"p-6",children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s()},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex space-x-4 mb-6",children:[(0,a.jsx)(i.$,{type:"button",variant:u?"default":"outline",onClick:()=>p(!0),className:"flex-1",children:"Individual"}),(0,a.jsx)(i.$,{type:"button",variant:u?"outline":"default",onClick:()=>p(!1),className:"flex-1",children:"Organization"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.J,{htmlFor:"fullName",children:"Full Name *"}),(0,a.jsx)(c.p,{id:"fullName",value:t.full_name||"",onChange:e=>r({full_name:e.target.value}),placeholder:"Enter full name",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.J,{htmlFor:"email",children:"Email Address *"}),(0,a.jsx)(c.p,{id:"email",type:"email",value:t.email||"",onChange:e=>r({email:e.target.value}),placeholder:"Enter email address",required:!0})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.J,{htmlFor:"password",children:"Password *"}),(0,a.jsx)(c.p,{id:"password",type:"password",value:t.password||"",onChange:e=>r({...t,password:e.target.value}),placeholder:"Enter password for login",required:!0}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Must be at least 8 characters with uppercase, lowercase, and numbers"})]}),!u&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.J,{htmlFor:"organizationName",children:"Organization Name *"}),(0,a.jsx)(c.p,{id:"organizationName",value:"organization"===t.entity_type&&t.organization_name||"",onChange:e=>r({...t,organization_name:e.target.value}),placeholder:"Enter organization name",required:!u})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.J,{htmlFor:"contactPhone",children:"Contact Phone"}),(0,a.jsx)(c.p,{id:"contactPhone",value:"organization"===t.entity_type&&t.contact_phone||"",onChange:e=>r({...t,contact_phone:e.target.value}),placeholder:"Enter contact phone"})]})]}),!u&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.J,{htmlFor:"businessType",children:"Business Type"}),(0,a.jsx)(c.p,{id:"businessType",value:"organization"===t.entity_type&&t.business_type||"",onChange:e=>r({...t,business_type:e.target.value}),placeholder:"e.g., Technology, Healthcare, Finance"})]}),(0,a.jsxs)("div",{className:"flex justify-between pt-4",children:[(0,a.jsxs)(i.$,{type:"button",variant:"outline",onClick:d,children:[(0,a.jsx)(m.A,{className:"w-4 h-4 mr-2"}),"Back"]}),(0,a.jsxs)(i.$,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",children:["Continue",(0,a.jsx)(h,{className:"w-4 h-4 ml-2"})]})]})]})})})]})},v=e=>{let t,{formData:r,selectedPlan:n,plans:s,onSignup:c,onBack:l,isLoading:d}=e;if(!s||!n)return null;let u=s[n];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Confirm Your Subscription"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Review your information before proceeding"})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)(o.Zp,{children:[(0,a.jsx)(o.aR,{children:(0,a.jsx)(o.ZB,{children:"Account Details"})}),(0,a.jsxs)(o.Wu,{className:"space-y-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Name:"})," ",r.full_name]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Email:"})," ",r.email]}),"organization"===r.entity_type&&r.organization_name&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Organization:"})," ",r.organization_name]}),"organization"===r.entity_type&&r.contact_phone&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Phone:"})," ",r.contact_phone]}),"organization"===r.entity_type&&r.business_type&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Business Type:"})," ",r.business_type]})]})]}),(0,a.jsxs)(o.Zp,{children:[(0,a.jsx)(o.aR,{children:(0,a.jsx)(o.ZB,{children:"Selected Plan"})}),(0,a.jsxs)(o.Wu,{className:"space-y-3",children:[(0,a.jsx)("div",{className:"text-xl font-bold",children:u.name}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:["$",u.price_per_month,"/month"]}),(0,a.jsxs)("ul",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("li",{children:["• ",(t=u.monthly_token_limit,new Intl.NumberFormat().format(t))," tokens/month"]}),(0,a.jsxs)("li",{children:["• ",u.max_chatbots," chatbots"]}),(0,a.jsxs)("li",{children:["• ",u.max_documents_per_chatbot," documents per chatbot"]}),(0,a.jsxs)("li",{children:["• ",u.analytics_retention_days," days analytics retention"]}),u.priority_support&&(0,a.jsx)("li",{children:"• Priority support"}),u.custom_branding&&(0,a.jsx)("li",{children:"• Custom branding"}),u.api_access&&(0,a.jsx)("li",{children:"• API access"})]})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between pt-4",children:[(0,a.jsxs)(i.$,{variant:"outline",onClick:l,disabled:d,children:[(0,a.jsx)(m.A,{className:"w-4 h-4 mr-2"}),"Back"]}),(0,a.jsx)(i.$,{onClick:c,disabled:d,className:"bg-blue-600 hover:bg-blue-700",children:d?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating Account..."]}):"Create Account"})]})]})};function w(){let e=(0,s.useSearchParams)(),t=(0,s.useRouter)(),[r,c]=(0,n.useState)(0),[l,d]=(0,n.useState)(null),[h,m]=(0,n.useState)(null),[w,j]=(0,n.useState)({}),[_,N]=(0,n.useState)(!1),[k,E]=(0,n.useState)(null);(0,n.useEffect)(()=>{(async()=>{try{let t=await f.k.getPlans();d(t);let r=e.get("plan");r&&t[r]&&m(r)}catch(e){console.error("Failed to load plans:",e),E("Failed to load subscription plans")}})()},[e]);let A=[{id:"plan-selection",title:"Choose Plan",description:"Select subscription plan",component:b},{id:"user-info",title:"Account Information",description:"Enter user details",component:y},{id:"confirmation",title:"Confirmation",description:"Review and confirm",component:v}],C=async()=>{if(!h||!l)return;let e=w.password,r=/[a-z]/.test(e),a=/[A-Z]/.test(e),n=/[0-9]/.test(e);if(!r||!a||!n||e.length<8)return void E("Password must be at least 8 characters and contain uppercase, lowercase, and numbers");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(w.email))return void E("Please enter a valid email address");N(!0),E(null);try{let e="organization"===w.entity_type||w.organization_name?{entity_type:"organization",full_name:w.full_name,email:w.email,selected_plan:h,password:w.password,organization_name:w.organization_name,contact_phone:w.contact_phone,business_type:w.business_type}:{entity_type:"user",full_name:w.full_name,email:w.email,selected_plan:h,password:w.password};await f.k.signup(e),x.oR.success("Account created successfully! User can now login with provided credentials."),t.push("/auth/login")}catch(e){console.error("Signup failed:",e),E(e instanceof Error?e.message:"Signup failed"),x.oR.error("Failed to create account. Please try again.")}finally{N(!1)}};if(k&&!l)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsx)(o.Zp,{className:"w-full max-w-md",children:(0,a.jsxs)(o.Wu,{className:"p-6 text-center",children:[(0,a.jsx)(g.A,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Error"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:k}),(0,a.jsx)(i.$,{onClick:()=>window.location.reload(),children:"Try Again"})]})})});if(!l)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(p.A,{className:"w-8 h-8 animate-spin text-blue-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading subscription plans..."})]})});let D=A[r].component;return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4",children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)("div",{className:"flex items-center justify-center space-x-4",children:A.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ".concat(t<=r?"bg-blue-600 text-white":"bg-gray-200 text-gray-500"),children:t<r?(0,a.jsx)(u.A,{className:"w-4 h-4"}):t+1}),(0,a.jsx)("span",{className:"ml-2 text-sm font-medium text-gray-700",children:e.title}),t<A.length-1&&(0,a.jsx)("div",{className:"w-8 h-0.5 bg-gray-200 mx-4"})]},e.id))})}),(0,a.jsx)(o.Zp,{children:(0,a.jsxs)(o.Wu,{className:"p-8",children:[k&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(g.A,{className:"w-5 h-5 text-red-500 mr-2"}),(0,a.jsx)("span",{className:"text-red-700",children:k})]})}),(0,a.jsx)(D,{plans:l,selectedPlan:h,onPlanSelect:e=>{m(e),j(t=>({...t,selected_plan:e}))},formData:w,onFormDataChange:e=>{j(t=>({...t,...e}))},onNext:()=>{r<A.length-1&&c(r+1)},onBack:()=>{r>0&&c(r-1)},onSignup:C,isLoading:_})]})})]})})}},2504:(e,t,r)=>{"use strict";r.d(t,{k:()=>o});var a=r(1643),n=r(7228);let s="http://localhost:8001",o={getPlans:async()=>{let e=(0,n.O)("/api/onboarding/plans"),t=n.n.get(e);if(t)return t;try{let t=await fetch("".concat(s,"/api/onboarding/plans"));if(!t.ok)throw Error("Failed to fetch plans: ".concat(t.status));let r=await t.json(),a=r.plans||r;return n.n.set(e,a,36e5),a}catch(r){console.error("Error fetching subscription plans:",r);let t={basic:{name:"Basic Plan",monthly_token_limit:1e4,price_per_month:29.99,max_chatbots:3,max_documents_per_chatbot:50,priority_support:!1,custom_branding:!1,api_access:!1,analytics_retention_days:30},professional:{name:"Professional Plan",monthly_token_limit:5e4,price_per_month:99.99,max_chatbots:10,max_documents_per_chatbot:200,priority_support:!0,custom_branding:!0,api_access:!0,analytics_retention_days:90},enterprise:{name:"Enterprise Plan",monthly_token_limit:2e5,price_per_month:299.99,max_chatbots:50,max_documents_per_chatbot:1e3,priority_support:!0,custom_branding:!0,api_access:!0,analytics_retention_days:365}};return n.n.set(e,t,3e5),t}},signup:async e=>{try{let t=new AbortController,r=setTimeout(()=>t.abort(),3e4),a=await fetch("".concat(s,"/api/onboarding/admin/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),signal:t.signal});if(clearTimeout(r),!a.ok){let e=await a.json();throw Error(e.detail||"Signup failed: ".concat(a.status))}return await a.json()}catch(e){if(console.error("Error during signup:",e),e instanceof Error&&"AbortError"===e.name)throw Error("Request timed out. Please check if the server is running.");throw e}},getSubscriptionStatus:async(e,t)=>{let r=(0,n.O)("/api/onboarding/subscription/".concat(e,"/").concat(t)),a=n.n.get(r);if(a)return a;try{let a=await fetch("".concat(s,"/api/onboarding/subscription/").concat(e,"/").concat(t));if(!a.ok)throw Error("Failed to fetch subscription status: ".concat(a.status));let o=await a.json();return n.n.set(r,o,3e4),o}catch(t){console.error("Error fetching subscription status:",t);let e={subscription_id:"mock-subscription-id",tokens_used_this_month:2500,tokens_remaining:7500,monthly_limit:1e4,usage_percentage:25,reset_date:new Date(Date.now()+2592e6).toISOString()};return n.n.set(r,e,6e4),e}},consumeTokens:async e=>{try{let{token:t,userId:r,orgId:o}=await (0,a.F)(),i={"Content-Type":"application/json",Authorization:"Bearer ".concat(t),"X-User-ID":r};o&&(i["X-Org-ID"]=o);let c=await fetch("".concat(s,"/api/onboarding/tokens/consume"),{method:"POST",headers:i,body:JSON.stringify(e)});if(!c.ok){let e=await c.json();throw Error(e.detail||"Token consumption failed: ".concat(c.status))}let l=await c.json();return n.n.deleteMatching("/api/onboarding/subscription"),l}catch(e){throw console.error("Error consuming tokens:",e),e}},checkTokenAvailability:async(e,t,r)=>{try{let a=await fetch("".concat(s,"/api/onboarding/tokens/check/").concat(e,"/").concat(t,"/").concat(r));if(!a.ok)throw Error("Token availability check failed: ".concat(a.status));return await a.json()}catch(e){return console.error("Error checking token availability:",e),{success:!0,has_enough_tokens:!0,tokens_required:r,tokens_available:7500,can_proceed:!0}}},getSupportedChannels:async()=>{let e=(0,n.O)("/api/onboarding/channels"),t=n.n.get(e);if(t)return t;try{let t=await fetch("".concat(s,"/api/onboarding/channels"));if(!t.ok)throw Error("Failed to fetch channels: ".concat(t.status));let r=await t.json(),a=r.channels||r;return n.n.set(e,a,36e5),a}catch(r){console.error("Error fetching supported channels:",r);let t={website:{name:"Website Chat",description:"Embedded chat widget on websites",icon:"\uD83C\uDF10",typical_use_cases:["Customer support","Lead generation","FAQ"]},whatsapp:{name:"WhatsApp Business",description:"WhatsApp Business API integration",icon:"\uD83D\uDCF1",typical_use_cases:["Customer service","Order updates","Marketing"]},messenger:{name:"Facebook Messenger",description:"Facebook Messenger integration",icon:"\uD83D\uDCAC",typical_use_cases:["Social commerce","Customer support","Engagement"]},instagram:{name:"Instagram Direct",description:"Instagram Direct Messages integration",icon:"\uD83D\uDCF8",typical_use_cases:["Brand engagement","Product inquiries","Support"]},api:{name:"REST API",description:"API integration for custom applications",icon:"\uD83D\uDD0C",typical_use_cases:["Custom apps","System integration","Automation"]},mobile_app:{name:"Mobile App",description:"Mobile application integration",icon:"\uD83D\uDCF2",typical_use_cases:["In-app support","User onboarding","Feature guidance"]}};return n.n.set(e,t,36e5),t}},getChannelConfigurations:async e=>{let t=(0,n.O)("/api/onboarding/subscription/".concat(e,"/channels/config")),r=n.n.get(t);if(r)return r;try{let r=await fetch("".concat(s,"/api/onboarding/subscription/").concat(e,"/channels/config"));if(!r.ok)throw Error("Failed to fetch channel configurations: ".concat(r.status));let a=await r.json(),o=a.configurations||a;return n.n.set(t,o,3e5),o}catch(e){throw console.error("Error fetching channel configurations:",e),e}},updateChannelConfiguration:async(e,t,r)=>{try{let{token:o,userId:i,orgId:c}=await (0,a.F)(),l={"Content-Type":"application/json",Authorization:"Bearer ".concat(o),"X-User-ID":i};c&&(l["X-Org-ID"]=c);let d=await fetch("".concat(s,"/api/onboarding/subscription/").concat(e,"/channels/").concat(t,"/config"),{method:"PUT",headers:l,body:JSON.stringify(r)});if(!d.ok){let e=await d.json();throw Error(e.detail||"Channel configuration update failed: ".concat(d.status))}let u=await d.json();return n.n.deleteMatching("/api/onboarding/subscription/".concat(e,"/channels")),u}catch(e){throw console.error("Error updating channel configuration:",e),e}},getSubscriptionAnalytics:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;if(!e)throw Error("Subscription ID is required");let r=(0,n.O)("/api/onboarding/analytics/".concat(e,"?days_back=").concat(t)),a=n.n.get(r);if(a)return a;try{let a=new AbortController,o=setTimeout(()=>a.abort(),3e4),i=await fetch("".concat(s,"/api/onboarding/analytics/").concat(e,"?days_back=").concat(t),{signal:a.signal});if(clearTimeout(o),!i.ok){let e=(await i.json().catch(()=>({}))).detail||"Failed to fetch analytics: ".concat(i.status);throw Error(e)}let c=await i.json(),l=c.analytics||c;return n.n.set(r,l,3e5),l}catch(e){if(console.error("Error fetching subscription analytics:",e),e instanceof Error&&"AbortError"===e.name)throw Error("Request timed out. Please check if the server is running.");throw e}},getChannelComparison:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,r=(0,n.O)("/api/onboarding/analytics/".concat(e,"/channels/comparison?days_back=").concat(t)),a=n.n.get(r);if(a)return a;try{let a=await fetch("".concat(s,"/api/onboarding/analytics/").concat(e,"/channels/comparison?days_back=").concat(t));if(!a.ok)throw Error("Failed to fetch channel comparison: ".concat(a.status));let o=await a.json(),i=o.comparison||o;return n.n.set(r,i,3e5),i}catch(e){throw console.error("Error fetching channel comparison:",e),e}},getChannelTrends:async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,a=(0,n.O)("/api/onboarding/analytics/".concat(e,"/channels/").concat(t,"/trends?days_back=").concat(r)),o=n.n.get(a);if(o)return o;try{let o=await fetch("".concat(s,"/api/onboarding/analytics/").concat(e,"/channels/").concat(t,"/trends?days_back=").concat(r));if(!o.ok)throw Error("Failed to fetch channel trends: ".concat(o.status));let i=await o.json(),c=i.trends||i;return n.n.set(a,c,3e5),c}catch(e){throw console.error("Error fetching channel trends:",e),e}},estimateTokensForOperation:(e,t,r)=>{switch(e){case"chat":return 100+(t||0)/4;case"document_upload":return 500+(r||0)/100;case"document_processing":return 200;case"web_scraping":return 300;case"embedding_generation":return 50;default:return 100}},invalidateSubscriptionCache:()=>{n.n.deleteMatching("/api/onboarding"),console.log("Subscription cache invalidated")}}},3998:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var a=r(5155);r(2115);var n=r(2467),s=r(3101),o=r(4269);let i=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:t,variant:r,size:s,asChild:c=!1,...l}=e,d=c?n.DX:"button";return(0,a.jsx)(d,{"data-slot":"button",className:(0,o.cn)(i({variant:r,size:s,className:t})),...l})}},4269:(e,t,r)=>{"use strict";r.d(t,{cn:()=>s});var a=r(2821),n=r(5889);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.QP)((0,a.$)(t))}},5142:(e,t,r)=>{"use strict";r.d(t,{p:()=>s});var a=r(5155);r(2115);var n=r(4269);function s(e){let{className:t,type:r,...s}=e;return(0,a.jsx)("input",{type:r,"data-slot":"input",className:(0,n.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...s})}},5299:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},5315:(e,t,r)=>{Promise.resolve().then(r.bind(r,2449))},5626:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},5917:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},6132:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6444:(e,t,r)=>{"use strict";r.d(t,{J:()=>o});var a=r(5155);r(2115);var n=r(489),s=r(4269);function o(e){let{className:t,...r}=e;return(0,a.jsx)(n.b,{"data-slot":"label",className:(0,s.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...r})}},6948:(e,t,r)=>{"use strict";r.d(t,{BT:()=>c,Wu:()=>l,ZB:()=>i,Zp:()=>s,aR:()=>o});var a=r(5155);r(2115);var n=r(4269);function s(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,n.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}function o(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,n.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function i(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,n.cn)("leading-none font-semibold",t),...r})}function c(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,n.cn)("text-muted-foreground text-sm",t),...r})}function l(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,n.cn)("px-6",t),...r})}},7228:(e,t,r)=>{"use strict";r.d(t,{O:()=>s,n:()=>n});class a{set(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e5;this.cache.set(e,{data:t,timestamp:Date.now(),ttl:r})}get(e){let t=this.cache.get(e);return t?Date.now()-t.timestamp>t.ttl?(this.cache.delete(e),null):t.data:null}clear(){this.cache.clear()}delete(e){return this.cache.delete(e)}has(e){let t=this.cache.get(e);return!!t&&(!(Date.now()-t.timestamp>t.ttl)||(this.cache.delete(e),!1))}getKeysMatching(e){let t=[];for(let r of this.cache.keys())r.includes(e)&&t.push(r);return t}deleteMatching(e){let t=this.getKeysMatching(e);return t.forEach(e=>this.cache.delete(e)),t.length}cleanup(){let e=Date.now();for(let[t,r]of this.cache.entries())e-r.timestamp>r.ttl&&this.cache.delete(t)}constructor(){this.cache=new Map}}let n=new a;setInterval(()=>{n.cleanup()},3e5);let s=(e,t)=>{let r=t?JSON.stringify(t):"";return"".concat(e).concat(r)}},8142:(e,t,r)=>{"use strict";r.d(t,{sG:()=>c});var a=r(2115);r(7650);var n=r(4446),s=r(5155),o=Symbol("radix.slottable");function i(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===o}var c=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=function(e){let t=function(e){let t=a.forwardRef((e,t)=>{var r,s,o;let i,c,{children:l,...d}=e,u=a.isValidElement(l)?(c=(i=null==(s=Object.getOwnPropertyDescriptor((r=l).props,"ref"))?void 0:s.get)&&"isReactWarning"in i&&i.isReactWarning)?r.ref:(c=(i=null==(o=Object.getOwnPropertyDescriptor(r,"ref"))?void 0:o.get)&&"isReactWarning"in i&&i.isReactWarning)?r.props.ref:r.props.ref||r.ref:void 0,h=(0,n.s)(u,t);if(a.isValidElement(l)){let e=function(e,t){let r={...t};for(let a in t){let n=e[a],s=t[a];/^on[A-Z]/.test(a)?n&&s?r[a]=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let a=s(...t);return n(...t),a}:n&&(r[a]=n):"style"===a?r[a]={...n,...s}:"className"===a&&(r[a]=[n,s].filter(Boolean).join(" "))}return{...e,...r}}(d,l.props);return l.type!==a.Fragment&&(e.ref=h),a.cloneElement(l,e)}return a.Children.count(l)>1?a.Children.only(null):null});return t.displayName="".concat(e,".SlotClone"),t}(e),r=a.forwardRef((e,r)=>{let{children:n,...o}=e,c=a.Children.toArray(n),l=c.find(i);if(l){let e=l.props.children,n=c.map(t=>t!==l?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,s.jsx)(t,{...o,ref:r,children:a.isValidElement(e)?a.cloneElement(e,void 0,n):null})}return(0,s.jsx)(t,{...o,ref:r,children:n})});return r.displayName="".concat(e,".Slot"),r}(`Primitive.${t}`),o=a.forwardRef((e,a)=>{let{asChild:n,...o}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,s.jsx)(n?r:t,{...o,ref:a})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{})}},e=>{e.O(0,[4554,284,8720,8441,1255,7358],()=>e(e.s=5315)),_N_E=e.O()}]);
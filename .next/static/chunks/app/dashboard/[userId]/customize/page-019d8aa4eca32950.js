(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7144],{991:(e,s,a)=>{"use strict";a.d(s,{k:()=>l});var t=a(5155);a(2115);var r=a(6657),i=a(4269);function l(e){let{className:s,value:a,...l}=e;return(0,t.jsx)(r.bL,{"data-slot":"progress",className:(0,i.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",s),...l,children:(0,t.jsx)(r.C1,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})}},1120:(e,s,a)=>{"use strict";a.d(s,{T:()=>i});var t=a(5155);a(2115);var r=a(4269);function i(e){let{className:s,...a}=e;return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,r.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),...a})}},1647:(e,s,a)=>{"use strict";a.d(s,{E:()=>n});var t=a(5155);a(2115);var r=a(3101),i=a(4269);let l=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:s,variant:a,...r}=e;return(0,t.jsx)("div",{className:(0,i.cn)(l({variant:a}),s),...r})}},4846:(e,s,a)=>{"use strict";a.d(s,{d:()=>n});var t=a(5155),r=a(2115),i=a(7599),l=a(4269);let n=r.forwardRef((e,s)=>{let{className:a,thumbClassName:r,...n}=e;return(0,t.jsx)(i.bL,{className:(0,l.cn)("peer inline-flex h-5 w-10 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...n,ref:s,children:(0,t.jsx)(i.zi,{className:(0,l.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0",r)})})});n.displayName=i.bL.displayName},5142:(e,s,a)=>{"use strict";a.d(s,{p:()=>i});var t=a(5155);a(2115);var r=a(4269);function i(e){let{className:s,type:a,...i}=e;return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...i})}},5675:(e,s,a)=>{Promise.resolve().then(a.bind(a,8991))},6444:(e,s,a)=>{"use strict";a.d(s,{J:()=>l});var t=a(5155);a(2115);var r=a(489),i=a(4269);function l(e){let{className:s,...a}=e;return(0,t.jsx)(r.b,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...a})}},8991:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>$});var t=a(5155),r=a(2115),i=a(63),l=a(3998),n=a(6948),o=a(1647),c=a(991),d=a(8332),m=a(3738),h=a(9559),u=a(2056),x=a(8314),g=a(3166),b=a(6191),p=a(8192),v=a(5880),f=a(1360),j=a(5626),N=a(1786),y=a(5870),w=a(534),C=a(5426),_=a(8720),k=a(2890),E=a(4211),A=a(4739),z=a(4846),F=a(6444),D=a(1120),T=a(5142),P=a(2529),S=a(6046);let B=[{value:"professional",label:"Professional",icon:"\uD83D\uDC54"},{value:"friendly",label:"Friendly",icon:"\uD83D\uDE0A"},{value:"helpful",label:"Helpful",icon:"\uD83E\uDD1D"},{value:"technical",label:"Technical",icon:"\uD83D\uDD27"},{value:"casual",label:"Casual",icon:"\uD83D\uDCAC"}],R=["#6a8fff","#10B981","#8B5CF6","#F59E0B","#EF4444","#06B6D4","#84CC16","#EC4899","#6366F1","#14B8A6","#F97316","#8B5A2B"];function I(e){let{}=e,s=(0,i.useSearchParams)(),a=(0,i.useRouter)(),{userId:c}=(0,i.useParams)(),m=s.get("id"),[h,x]=(0,r.useState)([]),[g,b]=(0,r.useState)(!1),{saving:v,currentUser:f,selectedChatbot:j,isEditMode:N,config:y,setSaving:w,setOrgChatbots:C,setSelectedChatbot:k,setIsEditMode:I,setShowCreateForm:$,setConfig:Z,updateConfig:J}=(0,E.iS)(),M=(0,r.useCallback)(e=>{var s,a,t;let r=[];return(null==(s=e.name)?void 0:s.trim())||r.push("Chatbot name is required"),e.name&&e.name.length>50&&r.push("Name must be under 50 characters"),(null==(a=e.greeting_message)?void 0:a.trim())||r.push("Greeting message is required"),e.greeting_message&&e.greeting_message.length>200&&r.push("Greeting message must be under 200 characters"),(null==(t=e.fallback_message)?void 0:t.trim())||r.push("Fallback message is required"),r},[]),[L,U]=(0,r.useState)({name:y.name||"",description:y.description||"",greeting_message:y.greeting_message||"",fallback_message:y.fallback_message||"",behavior:y.behavior||"",system_prompt:y.system_prompt||"",color_hex:y.color_hex||"#3B82F6"}),W=(0,r.useCallback)(e=>{Z({...e,description:e.description||"",color_hex:e.color_hex||"#6a8fff",tone:e.tone||"helpful",behavior:e.behavior||"Be helpful and informative",system_prompt:e.system_prompt||"",greeting_message:e.greeting_message||"Hello! How can I help you today?",fallback_message:e.fallback_message||"I'm sorry, I don't have information about that. Could you please rephrase your question?",ai_model_config:{model:"gpt-3.5-turbo",temperature:.7,max_tokens:1e3},is_active:"active"===e.status}),b(!1),x([])},[Z,b,x]),G=(0,r.useCallback)(async()=>{try{let e=await A.Ex.getChatbots();if(C(e),m){let s=e.find(e=>e.id===m);s?(k(s),W(s),I(!0),$(!1)):(_.oR.error("Chatbot not found"),a.push("/dashboard/".concat(c,"/customize")))}else e.length>0?(k(e[0]),W(e[0]),I(!1),$(!0)):($(!0),I(!1))}catch(e){console.error("Error loading organization chatbots:",e),_.oR.error("Failed to load chatbots")}},[m,C,k,I,$,a,c,W]);(0,r.useEffect)(()=>{G()},[G]),r.useEffect(()=>{console.log("\uD83D\uDD04 Updating input values from config:",{configId:y.id,configName:y.name,isEditMode:N,chatbotId:m}),U({name:y.name||"",description:y.description||"",greeting_message:y.greeting_message||"",fallback_message:y.fallback_message||"",behavior:y.behavior||"",system_prompt:y.system_prompt||"",color_hex:y.color_hex||"#3B82F6"})},[y,y.id,N,m]);let H=(0,r.useCallback)(e=>{var s;let a;return s=s=>{J({[e]:s}),b(!0),x(M({...y,[e]:s}))},function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];clearTimeout(a),a=setTimeout(()=>s(...t),300)}},[J,M,y]),O=r.useMemo(()=>({name:H("name"),description:H("description"),greeting_message:H("greeting_message"),fallback_message:H("fallback_message"),behavior:H("behavior"),system_prompt:H("system_prompt"),color_hex:H("color_hex"),is_active:H("is_active"),tone:H("tone")}),[H]),Y=(0,r.useCallback)((e,s)=>{var a;U(a=>({...a,[e]:s})),null==(a=O[e])||a.call(O,s)},[O]),q=(0,r.useCallback)((e,s)=>{J({[e]:s}),b(!0),x(M({...y,[e]:s}))},[J,M,y]),K=async()=>{try{var e,s;let t;w(!0);let r=M(y);if(r.length>0){_.oR.error("Please fix validation errors: ".concat(r.join(", "))),x(r);return}let i={id:(null==j?void 0:j.id)||"",name:y.name,description:y.description,color_hex:y.color_hex,tone:y.tone,behavior:y.behavior,greeting_message:y.greeting_message,status:y.is_active?"active":"inactive",user_id:(null==f?void 0:f.id)||"",org_id:null==f||null==(e=f.user_metadata)?void 0:e.org_id,system_prompt:y.system_prompt,fallback_message:y.fallback_message,chain_status:(null==j?void 0:j.chain_status)||"pending",trainer_at:(null==j?void 0:j.trainer_at)||new Date().toISOString(),created_at:(null==j?void 0:j.created_at)||new Date().toISOString(),ai_model_config:y.ai_model_config||{model:"gpt-3.5-turbo",temperature:.7,max_tokens:1e3},deployment_config:(null==j?void 0:j.deployment_config)||{url:"",headers:{},method:""},is_active:y.is_active};console.log("\uD83D\uDCBE Attempting to save chatbot:",{isEditMode:N,chatbotId:null==j?void 0:j.id,chatbotData:i,currentUser:f?{id:f.id,org_id:null==(s=f.user_metadata)?void 0:s.org_id}:null}),N&&(null==j?void 0:j.id)?(console.log("\uD83D\uDD04 Updating existing chatbot:",j.id),t=await A.Ex.updateChatbot(j.id,i),_.oR.success("Chatbot updated successfully!")):(console.log("✨ Creating new chatbot"),t=await A.Ex.createChatbot(i),_.oR.success("Chatbot created successfully!"),I(!0),$(!1),k(t),a.push("/dashboard/".concat(c,"/customize?id=").concat(t.id))),b(!1),x([]),await G()}catch(s){console.error("❌ Error saving chatbot:",s);let e="Failed to save chatbot configuration";s instanceof Error&&(console.error("\uD83D\uDD0D Error details:",{message:s.message,stack:s.stack,name:s.name}),e=s.message.includes("401")||s.message.includes("Authentication")?"Authentication failed. Please log in again.":s.message.includes("403")?"Permission denied. Check your access rights.":s.message.includes("404")?"Backend endpoint not found. Check if server is running on http://localhost:8001":s.message.includes("500")?"Server error. Please try again later.":s.message.includes("Network")||s.message.includes("fetch")||s.message.includes("Failed to fetch")?"Cannot connect to server. Is the backend running on http://localhost:8001?":"Save failed: ".concat(s.message)),_.oR.error(e)}finally{w(!1)}};return(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(p.A,{className:"w-5 h-5"}),"Advanced Chatbot Configuration",g&&(0,t.jsx)(o.E,{variant:"secondary",className:"ml-2",children:"Unsaved Changes"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(z.d,{checked:y.is_active,onCheckedChange:e=>q("is_active",e)}),(0,t.jsx)(F.J,{className:"text-sm",children:"Active"})]})]})}),(0,t.jsxs)(n.Wu,{children:[h.length>0&&(0,t.jsxs)(d.Fc,{className:"mb-4 border-red-200 bg-red-50",children:[(0,t.jsx)(u.A,{className:"h-4 w-4 text-red-600"}),(0,t.jsxs)(d.TN,{children:[(0,t.jsx)("strong",{children:"Please fix the following errors:"}),(0,t.jsx)("ul",{className:"mt-2 list-disc list-inside",children:h.map((e,s)=>(0,t.jsx)("li",{className:"text-sm text-red-700",children:e},s))})]})]}),(0,t.jsx)("div",{className:"w-full",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"my-7 grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)(F.J,{htmlFor:"name",children:"Chatbot Name"}),(0,t.jsx)(T.p,{id:"name",value:L.name,onChange:e=>Y("name",e.target.value),placeholder:"Enter chatbot name...",className:"mt-4"})]})}),(0,t.jsxs)("div",{className:"my-7",children:[(0,t.jsx)(F.J,{htmlFor:"description",children:"Description"}),(0,t.jsx)(D.T,{id:"description",value:L.description,onChange:e=>Y("description",e.target.value),placeholder:"Describe what this chatbot does and its purpose...",className:"mt-4",rows:3})]}),(0,t.jsxs)("div",{className:"my-7",children:[(0,t.jsx)(F.J,{children:"Personality & Tone"}),(0,t.jsx)("div",{className:"mt-4 grid grid-cols-5 gap-3",children:B.map(e=>(0,t.jsx)("div",{className:"p-2 border rounded-lg cursor-pointer transition-all ".concat(y.tone===e.value?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),onClick:()=>q("tone",e.value),children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-xl",children:e.icon}),(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"font-medium",children:e.label})}),y.tone===e.value&&(0,t.jsx)(P.A,{className:"h-5 w-5 text-green-600 ml-auto"})]})},e.value))})]}),(0,t.jsxs)("div",{className:"my-9",children:[(0,t.jsx)(F.J,{children:"Primary Color"}),(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsx)("div",{className:"flex gap-2 mb-3 flex-wrap",children:R.map(e=>(0,t.jsx)("button",{className:"w-6 h-6 rounded-full border-2 ".concat(y.color_hex===e?"border-gray-900 scale-110":"border-gray-200 hover:border-gray-400"," transition-all"),style:{backgroundColor:e},onClick:()=>q("color_hex",e)},e))}),(0,t.jsx)(T.p,{type:"color",value:L.color_hex,onChange:e=>Y("color_hex",e.target.value),className:"w-20 h-10"})]})]}),(0,t.jsxs)("div",{className:"my-7 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(F.J,{htmlFor:"greeting",children:"Greeting Message"}),(0,t.jsx)(D.T,{id:"greeting",value:L.greeting_message,onChange:e=>Y("greeting_message",e.target.value),placeholder:"Hello! How can I help you today?",className:"mt-4",rows:2})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(F.J,{htmlFor:"fallback",children:"Fallback Message"}),(0,t.jsx)(D.T,{id:"fallback",value:L.fallback_message,onChange:e=>Y("fallback_message",e.target.value),placeholder:"I'm sorry, I don't have information about that...",className:"mt-4",rows:2})]})]}),(0,t.jsxs)("div",{className:"my-9",children:[(0,t.jsx)(F.J,{htmlFor:"behavior",children:"Behavior & Personality"}),(0,t.jsx)(D.T,{id:"behavior",value:L.behavior,onChange:e=>Y("behavior",e.target.value),placeholder:"Describe how the chatbot should behave, its personality, and interaction style...",className:"mt-4",rows:4})]}),(0,t.jsxs)("div",{className:"my-9",children:[(0,t.jsx)(F.J,{htmlFor:"system-prompt",children:"System Prompt (Advanced)"}),(0,t.jsx)(D.T,{id:"system-prompt",value:L.system_prompt,onChange:e=>Y("system_prompt",e.target.value),placeholder:"You are a helpful assistant that...",className:"mt-1",rows:6}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-4",children:"Define specific instructions for the AI. This overrides default behavior settings."})]})]})}),(0,t.jsx)("div",{className:"flex justify-between mt-6 pt-6 border-t",children:(0,t.jsx)(l.$,{onClick:K,disabled:v||h.length>0,className:"pointer flex items-center gap-2 min-w-[150px]",children:v?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S.A,{className:"w-4 h-4"}),N?"Update Chatbot":"Create Chatbot"]})})})]})]})}function $(){let e=(0,i.useSearchParams)(),{userId:s}=(0,i.useParams)(),a=(0,i.useRouter)(),z=e.get("id"),[F,D]=(0,r.useState)(0),[T,P]=(0,r.useState)(null),{loading:S,orgChatbots:B,selectedChatbot:R,showCreateForm:$,uploads:Z,embedCode:J,showEmbedModal:M,deletingChatbotId:L,contextConfig:U,connectionStatus:W,error:G,setCurrentUser:H,setSelectedChatbot:O,setIsEditMode:Y,setShowCreateForm:q,setActiveTab:K,setShowEmbedModal:V,deleteChatbot:Q,generateEmbedCode:X,initializeStore:ee,testConnection:es,setError:ea}=(0,E.iS)(),et=(0,r.useCallback)(async e=>{try{let s=await A.Ex.getChatbot(e);O(s)}catch(e){console.error("Error loading specific chatbot:",e),_.oR.error("Failed to load chatbot configuration")}},[O]),er=(0,r.useCallback)(async()=>{try{let e=await es();P(new Date),!e&&F<3?(D(e=>e+1),setTimeout(()=>{er()},2e3*Math.pow(2,F))):e&&(D(0),ea(null))}catch(e){console.error("Connection check failed:",e)}},[es,F,ea]),ei=(0,r.useCallback)(async()=>{try{let{data:{session:e}}=await k.N.auth.getSession();if(!(null==e?void 0:e.user)){_.oR.error("Please log in to access this page"),a.push("/auth/login");return}H(e.user);try{await ee(),console.debug("✅ Application initialized successfully")}catch(e){console.warn("⚠️ Some features may not be available:",e)}z&&(await et(z),Y(!0))}catch(e){console.error("Error initializing page:",e),ea("Failed to initialize the application. Please refresh the page.")}},[ee,H,Y,z,a,et,ea]);(0,r.useEffect)(()=>{ei()},[ei]),(0,r.useEffect)(()=>{if("disconnected"===W){let e=setInterval(er,3e4);return()=>clearInterval(e)}},[W,er]);let el=()=>{O(null),Y(!1),q(!0),a.push("/dashboard/".concat(s,"/customize"))},en=async(e,t)=>{confirm('Are you sure you want to delete "'.concat(t,'"? This action cannot be undone.'))&&(await Q(e),(null==R?void 0:R.id)===e&&(O(null),Y(!1),q(!1),a.push("/dashboard/".concat(s,"/customize"))))},eo=async()=>{D(0),await er(),"disconnected"===W&&await ei()};return S?(0,t.jsx)("div",{className:"container mx-auto w-full max-w-7xl px-4 py-8",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,t.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsx)("div",{className:"h-32 bg-gray-200 rounded"}),(0,t.jsx)("div",{className:"h-32 bg-gray-200 rounded"}),(0,t.jsx)("div",{className:"h-32 bg-gray-200 rounded"})]}),(0,t.jsx)("div",{className:"h-96 bg-gray-200 rounded"})]})}):(0,t.jsxs)("div",{className:"mx-auto ml-[4.5vw] h-[98vh] overflow-y-scroll bg-white rounded-3xl p-8 ",children:["disconnected"===W&&(0,t.jsxs)(d.Fc,{className:"mb-6 border-red-200 bg-red-50",children:[(0,t.jsx)(m.A,{className:"h-4 w-4 text-red-600"}),(0,t.jsxs)(d.TN,{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Connection Lost:"})," Unable to connect to the backend services.",T&&(0,t.jsxs)("span",{className:"text-sm text-red-600 ml-2",children:["Last checked: ",T.toLocaleTimeString()]})]}),(0,t.jsxs)(l.$,{size:"sm",variant:"outline",onClick:eo,className:"ml-4",children:[(0,t.jsx)(h.A,{className:"w-4 h-4 mr-1"}),"Retry (",F,"/3)"]})]})]}),G&&(0,t.jsxs)(d.Fc,{className:"mb-6 border-orange-200 bg-orange-50",children:[(0,t.jsx)(u.A,{className:"h-4 w-4 text-orange-600"}),(0,t.jsx)(d.TN,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Error:"})," ",G,G.includes("Failed to initialize application")&&(0,t.jsx)("div",{className:"mt-2 text-sm text-orange-700",children:"This may be due to network issues or server problems. Try the actions below:"})]}),G.includes("Failed to initialize application")&&(0,t.jsxs)("div",{className:"flex gap-2 ml-4",children:[(0,t.jsxs)(l.$,{size:"sm",variant:"outline",onClick:()=>ee(),className:"text-orange-700 border-orange-300 hover:bg-orange-100",children:[(0,t.jsx)(h.A,{className:"w-4 h-4 mr-1"}),"Retry Initialize"]}),(0,t.jsxs)(l.$,{size:"sm",variant:"outline",onClick:()=>{ea(null),window.location.reload()},className:"text-orange-700 border-orange-300 hover:bg-orange-100",children:[(0,t.jsx)(x.A,{className:"w-4 h-4 mr-1"}),"Refresh Page"]})]})]})})]}),(0,t.jsxs)("div",{className:"pb-3",children:[(0,t.jsxs)("div",{className:"flex pb-3 items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("h1",{className:"font text-3xl font-bold",children:"AI Chatbot Management"}),"connected"===W&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-green-600",children:[(0,t.jsx)(g.A,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"text-sm",children:"Connected"})]}),"checking"===W&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-yellow-600",children:[(0,t.jsx)(h.A,{className:"w-4 h-4 animate-spin"}),(0,t.jsx)("span",{className:"text-sm",children:"Checking..."})]})]}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"Create, configure, optimize, and monitor your AI assistants"})]}),(0,t.jsxs)(l.$,{onClick:el,className:"flex items-center gap-2",disabled:"disconnected"===W,children:[(0,t.jsx)(b.A,{className:"w-4 h-4"}),"Create New Chatbot"]})]}),B.length>0&&!$&&(0,t.jsxs)(n.Zp,{className:"mb-6 border-1 bg-white",children:[(0,t.jsx)(n.aR,{children:(0,t.jsxs)(n.ZB,{className:"font text-lg flex items-center gap-2",children:[(0,t.jsx)(p.A,{className:"font w-5 h-5"}),"Your Organization's Chatbots"]})}),(0,t.jsx)(n.Wu,{children:(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:B.map(e=>(0,t.jsxs)("div",{className:"p-4 border rounded-lg cursor-pointer transition-all hover:shadow-md ".concat((null==R?void 0:R.id)===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),onClick:()=>{O(e),Y(!0),q(!1),a.push("/dashboard/".concat(s,"/customize?id=").concat(e.id))},children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,t.jsx)("h3",{className:"font-medium truncate",children:e.name}),(0,t.jsx)(o.E,{variant:"active"===e.status?"default":"secondary",className:"ml-2",children:e.status})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:e.description||"No description"}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.color_hex||"#3B82F6"}}),(0,t.jsx)("span",{className:"text-xs text-gray-500 capitalize",children:e.tone||"helpful"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(l.$,{size:"sm",variant:"ghost",onClick:s=>{s.stopPropagation(),window.open("/dashboard/chat?chatbot=".concat(e.id),"_blank")},title:"Test Chatbot",children:(0,t.jsx)(v.A,{className:"w-3 h-3"})}),(0,t.jsx)(l.$,{size:"sm",variant:"ghost",onClick:s=>{s.stopPropagation(),en(e.id,e.name)},disabled:L===e.id,className:"text-red-600 hover:text-red-700 hover:bg-red-50",title:"Delete Chatbot",children:L===e.id?(0,t.jsx)("div",{className:"w-3 h-3 animate-spin rounded-full border-2 border-red-600 border-t-transparent"}):(0,t.jsx)(f.A,{className:"w-3 h-3"})})]})]})]},e.id))})})]}),0===B.length&&!S&&(0,t.jsx)(n.Zp,{className:"mb-6 border-dashed border-2",children:(0,t.jsxs)(n.Wu,{className:"text-center py-12",children:[(0,t.jsx)(p.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No Chatbots Yet"}),(0,t.jsx)("p",{className:"font mb-4",children:"Create your first chatbot to get started with AI-powered customer support."}),(0,t.jsxs)(l.$,{onClick:el,className:"flex items-center gap-2",disabled:"disconnected"===W,children:[(0,t.jsx)(b.A,{className:"w-4 h-4"}),"Create Your First Chatbot"]})]})})]}),(R||$)&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between pb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[!$&&(0,t.jsxs)(l.$,{variant:"outline",onClick:()=>{O(null),Y(!1),a.push("/dashboard/".concat(s,"/customize"))},className:"pointer flex items-center gap-2 hover:bg-[#5D7DDE] hover:text-white",children:[(0,t.jsx)(j.A,{className:"w-4 h-4"}),"Back to List"]}),(0,t.jsx)("h2",{className:"text-2xl font-bold",children:$?"Create New Chatbot":"Edit: ".concat(null==R?void 0:R.name)})]}),R&&!$&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(l.$,{variant:"outline",onClick:()=>window.open("/dashboard/chat?chatbot=".concat(R.id),"_blank"),className:"flex items-center gap-2",children:[(0,t.jsx)(v.A,{className:"w-4 h-4"}),"Test Chatbot"]}),(0,t.jsxs)(l.$,{variant:"outline",onClick:()=>en(R.id,R.name),disabled:L===R.id,className:"flex items-center gap-2 text-red-600 hover:text-red-700 hover:bg-red-50 border-red-200 hover:border-red-300",children:[L===R.id?(0,t.jsx)("div",{className:"w-4 h-4 animate-spin rounded-full border-2 border-red-600 border-t-transparent"}):(0,t.jsx)(f.A,{className:"w-4 h-4"}),"Delete Chatbot"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-6",children:[(0,t.jsx)("div",{className:"xl:col-span-3",children:(0,t.jsx)(I,{})}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsx)(n.ZB,{className:"text-lg flex items-center gap-2",children:"\uD83D\uDCCA Knowledge Base"})}),(0,t.jsx)(n.Wu,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Total documents:"}),(0,t.jsx)(o.E,{variant:"outline",children:Z.length})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Active sources:"}),(0,t.jsx)(o.E,{variant:"outline",className:"bg-green-50 text-green-700",children:Z.filter(e=>"completed"===e.status).length})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Processing:"}),(0,t.jsx)(o.E,{variant:"outline",className:"bg-orange-50 text-orange-700",children:Z.filter(e=>"processing"===e.status).length})]}),(0,t.jsx)("div",{className:"pt-2",children:(0,t.jsx)(c.k,{value:Z.filter(e=>"completed"===e.status).length/Math.max(Z.length,1)*100,className:"mb-3"})}),(0,t.jsxs)(l.$,{variant:"outline",size:"sm",className:"w-full",onClick:()=>a.push("/dashboard/".concat(s,"/train")),children:[(0,t.jsx)(N.A,{className:"w-4 h-4 mr-2"}),"Manage Knowledge Base"]})]})})]}),(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsx)(n.ZB,{className:"text-lg flex items-center gap-2",children:"\uD83E\uDDE0 Context Engine Status"})}),(0,t.jsx)(n.Wu,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Model Tier:"}),(0,t.jsx)(o.E,{variant:"secondary",className:"capitalize",children:U.model_tier})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Strategy:"}),(0,t.jsx)(o.E,{variant:"outline",className:"capitalize",children:U.retrieval_strategy})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Quality Checks:"}),(0,t.jsx)(o.E,{variant:U.enable_hallucination_check?"default":"secondary",children:U.enable_hallucination_check?"Enabled":"Disabled"})]}),(0,t.jsxs)(l.$,{variant:"outline",size:"sm",className:"w-full",onClick:()=>K("context"),children:[(0,t.jsx)(y.A,{className:"w-4 h-4 mr-2"}),"Configure Engine"]})]})})]}),(0,t.jsxs)(n.Zp,{className:"bg-gradient-to-br from-rose-50 to-pink-50 border-rose-200",children:[(0,t.jsx)(n.aR,{children:(0,t.jsx)(n.ZB,{className:"text-lg flex items-center gap-2",children:"\uD83D\uDE80 Deployment"})}),(0,t.jsxs)(n.Wu,{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Your chatbot is optimized and ready for deployment. Generate embed code for websites or integrate via API."}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.$,{size:"sm",className:"w-full",onClick:()=>{if(!(null==R?void 0:R.id))return void _.oR.error("Please save the chatbot first");X(R.id)},disabled:!(null==R?void 0:R.id),children:"Generate Embed Code"}),(0,t.jsxs)(l.$,{variant:"outline",size:"sm",className:"w-full",onClick:()=>K("analytics"),children:[(0,t.jsx)(w.A,{className:"w-4 h-4 mr-2"}),"View Analytics"]})]})]})]})]})]})]}),M&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Embed Code"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Copy this code and paste it into your website where you want the chatbot to appear:"}),(0,t.jsx)("div",{className:"bg-gray-100 p-4 rounded-lg mb-4",children:(0,t.jsx)("pre",{className:"text-sm overflow-x-auto whitespace-pre-wrap",children:J})}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(l.$,{variant:"outline",onClick:()=>V(!1),children:"Close"}),(0,t.jsxs)(l.$,{onClick:()=>{navigator.clipboard.writeText(J),_.oR.success("Embed code copied to clipboard!")},className:"flex items-center gap-2",children:[(0,t.jsx)(C.A,{className:"w-4 h-4"}),"Copy Code"]})]})]})})]})}}},e=>{e.O(0,[4554,284,8720,8559,6264,1579,7741,3927,8441,1255,7358],()=>e(e.s=5675)),_N_E=e.O()}]);
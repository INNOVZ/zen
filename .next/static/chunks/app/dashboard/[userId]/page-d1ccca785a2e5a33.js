(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9804],{534:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},977:(e,s,a)=>{Promise.resolve().then(a.bind(a,6133))},1150:(e,s,a)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return c}});let t=a(5155),l=a(2115),r=a(4437);function n(e){return{default:e&&"default"in e?e.default:e}}a(6552);let i={loader:()=>Promise.resolve(n(()=>null)),loading:null,ssr:!0},c=function(e){let s={...i,...e},a=(0,l.lazy)(()=>s.loader().then(n)),c=s.loading;function d(e){let n=c?(0,t.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,i=!s.ssr||!!s.loading,d=i?l.Suspense:l.Fragment,o=s.ssr?(0,t.jsxs)(t.Fragment,{children:[null,(0,t.jsx)(a,{...e})]}):(0,t.jsx)(r.BailoutToCSR,{reason:"next/dynamic",children:(0,t.jsx)(a,{...e})});return(0,t.jsx)(d,{...i?{fallback:n}:{},children:o})}return d.displayName="LoadableComponent",d}},1786:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},2754:(e,s,a)=>{"use strict";a.d(s,{N:()=>t,d:()=>l});let t=e=>e&&(e.display_name||e.name||e.email)||"User",l=e=>{let s=t(e);return s.includes("@")?"User":s.split(" ")[0]}},4054:(e,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),!function(e,s){for(var a in s)Object.defineProperty(e,a,{enumerable:!0,get:s[a]})}(s,{bindSnapshot:function(){return n},createAsyncLocalStorage:function(){return r},createSnapshot:function(){return i}});let a=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class t{disable(){throw a}getStore(){}run(){throw a}exit(){throw a}enterWith(){throw a}static bind(e){return e}}let l="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function r(){return l?new l:new t}function n(e){return l?l.bind(e):t.bind(e)}function i(){return l?l.snapshot():function(e,...s){return e(...s)}}},4437:(e,s,a)=>{"use strict";function t(e){let{reason:s,children:a}=e;return a}Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"BailoutToCSR",{enumerable:!0,get:function(){return t}}),a(4553)},5299:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},6132:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6133:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>J});var t=a(5155),l=a(2115),r=a(63),n=a(6278),i=a.n(n),c=a(8332),d=a(3998),o=a(3738),u=a(9559),m=a(6948),x=a(2056);class h extends l.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){var a,t;console.error("ErrorBoundary caught an error:",e,s),null==(a=(t=this.props).onError)||a.call(t,e,s)}render(){if(this.state.hasError){var e;if(this.props.fallback){let e=this.props.fallback;return(0,t.jsx)(e,{error:this.state.error,retry:this.retry})}return(0,t.jsxs)(m.Zp,{className:"border-red-200",children:[(0,t.jsx)(m.aR,{children:(0,t.jsxs)(m.ZB,{className:"flex items-center gap-2 text-red-600",children:[(0,t.jsx)(x.A,{className:"h-5 w-5"}),"Something went wrong"]})}),(0,t.jsxs)(m.Wu,{className:"space-y-4",children:[(0,t.jsx)("p",{className:"text-gray-600",children:(null==(e=this.state.error)?void 0:e.message)||"An unexpected error occurred"}),(0,t.jsxs)(d.$,{onClick:this.retry,variant:"outline",className:"flex items-center gap-2",children:[(0,t.jsx)(u.A,{className:"h-4 w-4"}),"Try again"]})]})]})}return this.props.children}constructor(e){super(e),this.retry=()=>{this.setState({hasError:!1,error:void 0})},this.state={hasError:!1}}}let j=e=>{let{error:s,retry:a}=e;return(0,t.jsxs)("div",{className:"p-4 border border-red-200 rounded-lg bg-red-50",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-red-600 mb-2",children:[(0,t.jsx)(x.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"font-medium",children:"Error loading component"})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:(null==s?void 0:s.message)||"Something went wrong"}),(0,t.jsx)(d.$,{size:"sm",onClick:a,variant:"outline",children:"Retry"})]})};var g=a(4211),p=a(4739);let b=e=>{let s=e instanceof Error&&(e.message.includes("Unable to connect")||e.message.includes("Backend server unavailable")||e.message.includes("ECONNREFUSED")||e.message.includes("Failed to fetch")||e.message.includes("network")||e.message.includes("timeout"));return{isConnectionError:s,shouldShowToast:!0,logLevel:"error",message:s?"Backend server unavailable":"An unexpected error occurred"}},f=(e,s,a)=>{"warn"===a.logLevel?console.warn("".concat(s," - backend server not available")):console.error("Error in ".concat(s,":"),e)};var y=a(8192),N=a(1786),v=a(7586),w=a(1524),k=a(2890),C=a(8720),_=a(6191),A=a(2754);let S=(0,l.memo)(e=>{let{user:s,onTrainClick:a,onCustomizeClick:l}=e;return(0,t.jsxs)("header",{className:"flex justify-between items-center bg-color-gradient p-8 rounded-t-xl",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl text-white font-bold",children:["Welcome back, ",(0,A.d)(s),"!"]}),(0,t.jsx)("p",{className:"text-white mt-1",children:"Manage your AI chatbots and training data"})]}),(0,t.jsxs)("div",{className:"flex gap-2",role:"group","aria-label":"Primary actions",children:[(0,t.jsxs)(d.$,{onClick:a,variant:"outline",className:"pointer flex items-center gap-2","aria-label":"Add training data",children:[(0,t.jsx)(N.A,{className:"h-4 w-4","aria-hidden":"true"}),"Add Training Data"]}),(0,t.jsxs)(d.$,{onClick:l,className:"pointer flex items-center gap-2","aria-label":"Create new chatbot",children:[(0,t.jsx)(_.A,{className:"h-4 w-4","aria-hidden":"true"}),"Create Chatbot"]})]})]})});S.displayName="DashboardHeader";var E=a(1473),T=a(630);let R=(0,l.memo)(e=>{let{icon:s,title:a,value:l,className:r="text-white",isLoading:n=!1}=e;return(0,t.jsx)("div",{className:"px-4 py-3 bg-color border rounded-lg pointer border-0 hover:-translate-y-1 duration-500",role:"article","aria-label":"".concat(a," statistics"),children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(s,{size:22,className:r,"aria-hidden":"true"}),(0,t.jsx)("p",{className:"text-sm font-medium text-white",children:a})]}),(0,t.jsx)("div",{className:"text-xl glass shadow-xl font-bold px-4 py-1 rounded-lg text-white",children:n?(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)("div",{className:"animate-pulse bg-white/30 rounded-full w-4 h-4"}),(0,t.jsx)("span",{className:"text-sm animate-pulse",children:"Loading"})]}):(0,t.jsx)("span",{"aria-label":"".concat(l," ").concat(a.toLowerCase()),children:l})})]})})});R.displayName="StatCard";let O=(0,l.memo)(e=>{let{conversations:s,totalConversations:a,loading:l,conversationCount:r,conversationCountLoading:n}=e;return(0,t.jsxs)("div",{className:"px-4 py-3 bg-color border rounded-lg pointer border-0 hover:-translate-y-1 duration-500",role:"article","aria-label":"Conversations statistics",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(v.A,{size:20,className:"text-white","aria-hidden":"true"}),(0,t.jsx)("p",{className:"text-sm font-medium text-white",children:"Conversations"})]}),(0,t.jsx)("div",{className:"text-xl glass shadow-xl font-bold px-4 py-1 rounded-lg text-white",children:n?(0,t.jsxs)("div",{className:"flex items-center space-x-1",role:"status","aria-label":"Loading conversation count",children:[(0,t.jsx)("div",{className:"animate-pulse bg-white/30 rounded-full w-4 h-4"}),(0,t.jsx)("span",{className:"text-sm animate-pulse",children:"0"})]}):"number"==typeof r&&r>0?(0,t.jsx)("span",{"aria-label":"".concat(r," conversations"),children:r}):s.length>0?(0,t.jsx)("span",{"aria-label":"".concat(a," conversations"),children:a}):(0,t.jsx)("span",{className:"text-md","aria-label":"No conversations",children:"0"})})]}),!l&&0===s.length&&(0,t.jsx)("div",{className:"mt-2 text-center"})]})});O.displayName="ConversationsCard";var L=a(6154),M=a(1539),P=a(991);let D=(0,l.memo)(e=>{let{className:s}=e,{subscription:a,isLoading:l}=(0,M.Rs)(),r=e=>new Intl.NumberFormat().format(e),n=()=>a?a.usage_percentage:0,i=()=>{let e=n();return e>=95?"text-red-400":e>=80?"text-yellow-400":"text-green-400"};return(0,t.jsxs)("div",{className:"px-4 py-3 bg-color border rounded-lg pointer border-0 hover:-translate-y-1 duration-500 ".concat(s||""),role:"article","aria-label":"Token usage statistics",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(L.A,{size:20,className:"text-white","aria-hidden":"true"}),(0,t.jsx)("p",{className:"text-sm font-medium text-white",children:"Token Usage"})]}),(0,t.jsx)("div",{className:"text-xl glass shadow-xl font-bold px-4 py-1 rounded-lg text-white",children:l?(0,t.jsxs)("div",{className:"flex items-center space-x-1",role:"status","aria-label":"Loading token usage",children:[(0,t.jsx)("div",{className:"animate-pulse bg-white/30 rounded-full w-4 h-4"}),(0,t.jsx)("span",{className:"text-sm animate-pulse",children:"0%"})]}):a?(0,t.jsxs)("span",{className:i(),"aria-label":"".concat(n().toFixed(1),"% token usage"),children:[n().toFixed(1),"%"]}):(0,t.jsx)("span",{className:"text-md","aria-label":"No subscription",children:"0%"})})]}),a&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-xs text-white/80",children:[(0,t.jsxs)("span",{children:[r(a.tokens_used_this_month)," used"]}),(0,t.jsxs)("span",{children:[r(a.monthly_limit)," limit"]})]}),(0,t.jsx)(P.k,{value:n(),className:"h-2 bg-white/20",style:{backgroundColor:"#ffffff20"}}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-white/60",children:[(0,t.jsxs)("span",{children:[r(a.tokens_remaining)," remaining"]}),(0,t.jsx)("span",{className:i(),children:n()>=95?"Critical":n()>=80?"Warning":"Healthy"})]})]})]})});D.displayName="TokenUsageCard";var I=a(8594);let U=(0,l.memo)(e=>{let{stats:s,conversationsLoaded:a,conversations:l,loading:r,conversationCount:n,conversationCountLoading:i,onCreateConversation:c}=e;return(0,t.jsxs)("section",{"aria-label":"Dashboard Statistics",className:I.q.STATS_GRID_CLASSES,children:[(0,t.jsx)(R,{icon:T.bAt,title:"Total Chatbots",value:s.totalChatbots}),(0,t.jsx)(R,{icon:E.A,title:"Training Files",value:s.totalUploads,className:"glass-b text-white"}),(0,t.jsx)(O,{conversationsLoaded:a,conversations:l,totalConversations:s.totalConversations,loading:r,conversationCount:n,conversationCountLoading:i,onCreateClick:c}),(0,t.jsx)(D,{})]})});U.displayName="StatusGrid";let z=(0,l.memo)(e=>{let{icon:s,title:a,onClick:l}=e;return(0,t.jsxs)(d.$,{variant:"outline",className:"h-20 flex flex-col gap-2",onClick:l,"aria-label":a,children:[(0,t.jsx)(s,{className:"h-6 w-6","aria-hidden":"true"}),(0,t.jsx)("span",{children:a})]})});z.displayName="QuickActionButton";let F=(0,l.memo)(e=>{let{actions:s}=e;return(0,t.jsxs)(m.Zp,{className:"mt-8",children:[(0,t.jsx)(m.aR,{children:(0,t.jsx)(m.ZB,{children:"Quick Actions"})}),(0,t.jsx)(m.Wu,{children:(0,t.jsx)("nav",{"aria-label":"Quick Actions",className:I.q.QUICK_ACTIONS_GRID_CLASSES,children:s.map(e=>{let{id:s,icon:a,title:l,onClick:r}=e;return(0,t.jsx)(z,{icon:a,title:l,onClick:r},s)})})})]})});F.displayName="QuickActionsGrid";let q=(0,l.memo)(()=>(0,t.jsx)("div",{className:I.q.CONTAINER_CLASSES,role:"status","aria-label":"Loading dashboard",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"h-8 bg-gray-200 rounded w-64"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-48"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("div",{className:"h-10 bg-gray-200 rounded w-32"}),(0,t.jsx)("div",{className:"h-10 bg-gray-200 rounded w-32"})]})]}),(0,t.jsx)("div",{className:I.q.STATS_GRID_CLASSES,children:Array.from({length:I.q.SKELETON_ITEMS_COUNT},(e,s)=>(0,t.jsx)("div",{className:"h-24 bg-gray-200 rounded-lg"},s))}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsx)("div",{className:"h-96 bg-gray-200 rounded-lg"}),(0,t.jsx)("div",{className:"h-96 bg-gray-200 rounded-lg"})]})]})}));q.displayName="LoadingSkeleton";var B=a(534),G=a(5299),Z=a(6132),W=a(6485),$=a(2504);let Q=e=>{let{className:s}=e,{subscription:a}=(0,M.Rs)(),[r,n]=(0,l.useState)(null),[i,c]=(0,l.useState)(!1),[o,x]=(0,l.useState)(null),h=(0,l.useCallback)(async()=>{if(!(null==a?void 0:a.subscription_id)){x("No subscription found"),c(!1);return}try{c(!0),x(null);let e=await $.k.getSubscriptionAnalytics(a.subscription_id,30);n(e)}catch(e){console.error("Failed to load analytics:",e),e instanceof Error?e.message.includes("Subscription ID is required")?x("No subscription found"):e.message.includes("Request timed out")?x("Request timed out. Please check if the server is running."):e.message.includes("Failed to fetch")?x("Cannot connect to server. Please check if the server is running."):x("Failed to load analytics: ".concat(e.message)):x("Failed to load analytics data")}finally{c(!1)}},[null==a?void 0:a.subscription_id]);(0,l.useEffect)(()=>{h()},[h]);let j=e=>new Intl.NumberFormat().format(e),g=e=>"".concat(e.toFixed(1),"%");return i?(0,t.jsxs)(m.Zp,{className:s,children:[(0,t.jsx)(m.aR,{children:(0,t.jsxs)(m.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(B.A,{className:"h-5 w-5"}),"Subscription Analytics"]})}),(0,t.jsx)(m.Wu,{children:(0,t.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,t.jsx)(G.A,{className:"h-6 w-6 animate-spin"}),(0,t.jsx)("span",{className:"ml-2",children:"Loading analytics..."})]})})]}):o?(0,t.jsxs)(m.Zp,{className:s,children:[(0,t.jsx)(m.aR,{children:(0,t.jsxs)(m.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(B.A,{className:"h-5 w-5"}),"Subscription Analytics"]})}),(0,t.jsx)(m.Wu,{children:(0,t.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,t.jsx)(Z.A,{className:"h-6 w-6 text-red-500"}),(0,t.jsx)("span",{className:"ml-2 text-red-500",children:o}),(0,t.jsx)(d.$,{variant:"outline",size:"sm",onClick:h,className:"ml-4",children:(0,t.jsx)(u.A,{className:"h-4 w-4"})})]})})]}):r?(0,t.jsxs)(m.Zp,{className:s,children:[(0,t.jsx)(m.aR,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(m.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(B.A,{className:"h-5 w-5"}),"Subscription Analytics"]}),(0,t.jsx)(d.$,{variant:"outline",size:"sm",onClick:h,children:(0,t.jsx)(u.A,{className:"h-4 w-4"})})]})}),(0,t.jsxs)(m.Wu,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:j(r.total_tokens_used)}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Tokens Used"}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[g(r.usage_percentage)," of limit"]})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:r.channel_usage.length}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Active Channels"}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[r.most_active_channel," most used"]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Monthly Usage"}),(0,t.jsx)("span",{className:"font-medium",children:g(r.usage_percentage)})]}),(0,t.jsx)(P.k,{value:r.usage_percentage,className:"h-3",style:{backgroundColor:"#f3f4f6"}}),(0,t.jsxs)("div",{className:"flex justify-between text-sm text-gray-500",children:[(0,t.jsxs)("span",{children:[j(r.total_tokens_used)," used"]}),(0,t.jsxs)("span",{children:[j(r.total_tokens_limit)," limit"]})]})]}),r.channel_usage.length>0&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h4",{className:"font-medium text-sm text-gray-700",children:"Channel Usage"}),(0,t.jsx)("div",{className:"space-y-2",children:r.channel_usage.map(e=>(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600 capitalize",children:e.channel}),(0,t.jsxs)("span",{className:"font-medium",children:[j(e.tokens_used)," tokens"]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,t.jsxs)("span",{children:[e.message_count," messages"]}),(0,t.jsxs)("span",{children:[e.unique_users," users"]})]}),(0,t.jsx)(P.k,{value:e.tokens_used/r.total_tokens_used*100,className:"h-2"})]},e.channel))})]}),Object.keys(r.daily_usage).length>0&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h4",{className:"font-medium text-sm text-gray-700",children:"Recent Usage"}),(0,t.jsx)("div",{className:"space-y-2",children:Object.entries(r.daily_usage).slice(-7).map(e=>{let[s,a]=e;return(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:new Date(s).toLocaleDateString()}),(0,t.jsxs)("span",{className:"font-medium",children:[j(a)," tokens"]})]},s)})})]}),(0,t.jsx)("div",{className:"pt-4 border-t",children:(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,t.jsx)(W.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Billing Cycle"})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"font-medium",children:[r.days_remaining," days left"]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["Resets"," ",new Date(r.billing_cycle_end).toLocaleDateString()]})]})]})}),0!==r.growth_rate&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(w.A,{className:"h-4 w-4 text-green-500"}),(0,t.jsxs)("span",{className:"text-gray-600",children:[r.growth_rate>0?"+":"",r.growth_rate.toFixed(1),"% growth from last period"]})]})]})]}):(0,t.jsxs)(m.Zp,{className:s,children:[(0,t.jsx)(m.aR,{children:(0,t.jsxs)(m.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(B.A,{className:"h-5 w-5"}),"Subscription Analytics"]})}),(0,t.jsx)(m.Wu,{children:(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(B.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Analytics Data"}),(0,t.jsx)("p",{className:"text-gray-500 mb-4",children:"Analytics will appear here once you start using your chatbot."}),(0,t.jsxs)(d.$,{onClick:h,variant:"outline",children:[(0,t.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})})]})},H=i()(()=>a.e(1299).then(a.bind(a,1299)),{loadableGenerated:{webpack:()=>[1299]},ssr:!1}),K=i()(()=>a.e(6241).then(a.bind(a,6241)),{loadableGenerated:{webpack:()=>[6241]},loading:()=>(0,t.jsx)(q,{}),ssr:!1}),V=i()(()=>a.e(5781).then(a.bind(a,5781)),{loadableGenerated:{webpack:()=>[5781]},ssr:!1}),X=i()(()=>a.e(7083).then(a.bind(a,7083)),{loadableGenerated:{webpack:()=>[7083]},ssr:!1});function J(){let{userId:e}=(0,r.useParams)(),{setCurrentUser:s}=(0,g.iS)(),{user:a,isAuthLoading:n}=((e,s)=>{let a=(0,r.useRouter)(),[t,n]=(0,l.useState)(null),[i,c]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{let t=!0;return(async()=>{try{var l,r,i;c(!0);let{data:{session:d}}=await k.N.auth.getSession();if(!t)return;if(!(null==d?void 0:d.user))return void a.replace("/auth/login");if(d.user.id!==e){C.oR.error("Unauthorized access"),a.replace("/dashboard/".concat(d.user.id));return}let o={id:d.user.id,email:d.user.email||"",name:(null==(l=d.user.user_metadata)?void 0:l.name)||d.user.email||"",display_name:(null==(r=d.user.user_metadata)?void 0:r.display_name)||(null==(i=d.user.user_metadata)?void 0:i.name)||d.user.email||""};n(o),s(d.user)}catch(e){console.error("Error checking user access:",e),t&&a.replace("/auth/login")}finally{t&&c(!1)}})(),()=>{t=!1}},[e,a,s]),{user:t,isAuthLoading:i}})(e,s),{quickActions:i,handleCustomizeClick:m,handleTrainClick:x}=(e=>{let s=(0,r.useRouter)(),a=(0,l.useCallback)(()=>{s.push("/dashboard/".concat(e,"/train"))},[s,e]),t=(0,l.useCallback)(()=>{s.push("/dashboard/".concat(e,"/customize"))},[s,e]),n=(0,l.useCallback)(()=>{s.push("/dashboard/".concat(e,"/chat"))},[s,e]),i=(0,l.useCallback)(()=>{s.push("/dashboard/".concat(e,"/settings"))},[s,e]),c=(0,l.useMemo)(()=>[{id:"create-chatbot",icon:y.A,title:"Create Chatbot",onClick:t},{id:"upload-data",icon:N.A,title:"Upload Data",onClick:a},{id:"test-chat",icon:v.A,title:"Test Chat",onClick:n},{id:"view-analytics",icon:w.A,title:"View Analytics",onClick:i}],[t,a,n,i]);return{handleTrainClick:a,handleCustomizeClick:t,handleChatClick:n,handleSettingsClick:i,quickActions:c}})(e),{loading:_,analyticsLoading:A,chatbots:E,uploads:T,conversations:R,analyticsMetrics:O,isOffline:L,conversationCount:M,conversationCountLoading:P,loadDashboardData:D,handleRefreshAnalytics:z,refreshConnection:B}=(()=>{let{loading:e,analyticsLoading:s,orgChatbots:a,uploads:t,conversations:r,performanceMetrics:n,connectionStatus:i,loadChatbots:c,loadUploads:d,loadPerformanceMetrics:o,setConversations:u,testConnection:m}=(0,g.iS)(),[x,h]=(0,l.useState)(0),[j,y]=(0,l.useState)(!1),N=(0,l.useCallback)(async()=>{try{y(!0);let e=await p.kQ.getConversationCount();h(e)}catch(e){console.error("Error loading conversation count:",e),h(0)}finally{y(!1)}},[]),v=(0,l.useCallback)(async()=>{try{await Promise.allSettled([c(),d(),N()]),setTimeout(async()=>{try{let e=p.kQ.getConversations(10),s=new Promise((e,s)=>setTimeout(()=>s(Error("Conversation loading timeout")),1500)),a=await Promise.race([e,s]);u(a)}catch(s){let e=b(s);f(s,"loading conversations",e),u([])}},100),setTimeout(()=>{o(7)},200)}catch(s){let e=b(s);f(s,"loading dashboard data",e)}},[c,d,N,u,o]),w=(0,l.useCallback)(async()=>{await o(7)},[o]),k=(0,l.useCallback)(()=>{m(),v()},[m,v]);return{loading:e,analyticsLoading:s,chatbots:a,uploads:t,conversations:r,analyticsMetrics:n,isOffline:"disconnected"===i,conversationCount:x,conversationCountLoading:j,loadDashboardData:v,handleRefreshAnalytics:w,refreshConnection:k}})(),G=(0,l.useMemo)(()=>({totalChatbots:E.length,totalUploads:T.length,totalConversations:M||R.length,activeUsers:0}),[E.length,T.length,R.length,M]),[Z,W]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{if(a&&!n){let e=setTimeout(()=>{D()},100);return()=>clearTimeout(e)}},[a,n,D]),(0,l.useEffect)(()=>{R.length>0&&W(!0)},[R.length]),n||_)?(0,t.jsx)(q,{}):L?(0,t.jsx)(X,{onRetry:B,isRetrying:_}):(0,t.jsxs)("div",{className:I.q.CONTAINER_CLASSES,role:"main","aria-label":"User Dashboard",children:[(0,t.jsx)(V,{name:"Dashboard Render"}),(0,t.jsx)(H,{show:L}),L&&(0,t.jsxs)(c.Fc,{variant:"destructive",role:"alert",children:[(0,t.jsx)(o.A,{className:"h-4 w-4","aria-hidden":"true"}),(0,t.jsxs)(c.TN,{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Unable to connect to server. Some features may not work properly."}),(0,t.jsxs)(d.$,{size:"sm",variant:"outline",onClick:B,className:"ml-4","aria-label":"Retry connection",children:[(0,t.jsx)(u.A,{className:"h-4 w-4 mr-1","aria-hidden":"true"}),"Retry"]})]})]}),(0,t.jsx)(S,{user:a,userId:e,onTrainClick:x,onCustomizeClick:m}),(0,t.jsxs)("div",{className:"p-8",children:[(0,t.jsx)(U,{stats:G,conversationsLoaded:Z,conversations:R,loading:_,conversationCount:M,conversationCountLoading:P,onCreateConversation:m}),(0,t.jsx)(h,{fallback:j,children:(0,t.jsx)(l.Suspense,{fallback:(0,t.jsx)(q,{}),children:(0,t.jsx)(K,{metrics:O,onRefresh:z,loading:A})})}),(0,t.jsx)(h,{fallback:j,children:(0,t.jsx)(l.Suspense,{fallback:(0,t.jsx)(q,{}),children:(0,t.jsx)(Q,{})})}),(0,t.jsx)(F,{actions:i})]})]})}},6154:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},6191:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6278:(e,s,a)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return l}});let t=a(8140)._(a(1150));function l(e,s){var a;let l={};"function"==typeof e&&(l.loader=e);let r={...l,...s};return(0,t.default)({...r,modules:null==(a=r.loadableGenerated)?void 0:a.modules})}("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),e.exports=s.default)},6552:(e,s,a)=>{"use strict";function t(e){let{moduleIds:s}=e;return null}Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"PreloadChunks",{enumerable:!0,get:function(){return t}}),a(5155),a(7650),a(8567),a(7278)},7586:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},7828:(e,s,a)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"workAsyncStorageInstance",{enumerable:!0,get:function(){return t}});let t=(0,a(4054).createAsyncLocalStorage)()},8567:(e,s,a)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"workAsyncStorage",{enumerable:!0,get:function(){return t.workAsyncStorageInstance}});let t=a(7828)},8594:(e,s,a)=>{"use strict";a.d(s,{q:()=>t});let t={SKELETON_ITEMS_COUNT:4,STATS_GRID_CLASSES:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",QUICK_ACTIONS_GRID_CLASSES:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",CONTAINER_CLASSES:"mx-auto ml-[4.5vw] bg-gradient-to-b from-[#dbeafe] to-white rounded-3xl space-y-6 shadow-lg"}}},e=>{e.O(0,[9204,4554,284,8720,6264,5708,7741,3927,5473,8441,1255,7358],()=>e(e.s=977)),_N_E=e.O()}]);
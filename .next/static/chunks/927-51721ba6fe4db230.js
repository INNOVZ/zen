"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[927],{2890:(e,t,o)=>{o.d(t,{N:()=>n});let n=(0,o(8090).UU)("https://raoonyyrzzftdenvknfi.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJhb29ueXlyenpmdGRlbnZrbmZpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAyNDM1NzcsImV4cCI6MjA2NTgxOTU3N30.3t9rTN6x533lihs8ebUVHu9kuayFl_m2b6liifW1B88")},4211:(e,t,o)=>{o.d(t,{iS:()=>l});var n=o(5959),a=o(9863),r=o(4739),i=o(8720);let s={org_id:"",config_name:"default",initial_retrieval_count:20,semantic_rerank_count:10,final_context_chunks:5,max_context_length:4e3,enable_query_rewriting:!0,max_query_variants:3,conversation_context_turns:3,retrieval_strategy:"hybrid",semantic_weight:.6,keyword_weight:.4,model_tier:"balanced",embedding_model:"text-embedding-3-small",rerank_model:"gpt-3.5-turbo",enable_semantic_rerank:!0,enable_hallucination_check:!0,enable_source_verification:!0,confidence_threshold:.7,max_response_time_ms:5e3,enable_caching:!0,cache_ttl_minutes:60,domain_filters:{},business_context:"",specialized_instructions:"",enable_detailed_logging:!0,log_user_queries:!0,collect_feedback:!0,created_at:"",updated_at:""},c={id:"",name:"",description:"",color_hex:"#6a8fff",tone:"helpful",behavior:"Be helpful and informative while maintaining professionalism",system_prompt:"",greeting_message:"Hello! I'm your INNOVZ AI Assistant. How can I help you today?",fallback_message:"I apologize, but I don't have enough information to answer that accurately. Could you please rephrase or provide more context?",ai_model_config:{model:"gpt-4",temperature:.7,max_tokens:1e3},is_active:!0,chain_status:"ready",trainer_at:"",created_at:"",status:"active",deployment_config:{url:"",headers:{},method:"POST"},avatar_url:""},l=(0,n.v)()((0,a.lt)((e,t)=>({loading:!0,saving:!1,activeTab:"basic",showCreateForm:!1,showEmbedModal:!1,isEditMode:!1,analyticsLoading:!1,uploading:!1,currentUser:null,error:null,connectionStatus:"checking",orgChatbots:[],selectedChatbot:null,uploads:[],embedCode:"",performanceMetrics:null,conversations:[],deletingChatbotId:null,contextConfig:s,config:c,chatMessages:[],currentConversationId:null,setLoading:t=>e({loading:t},!1,"setLoading"),setSaving:t=>e({saving:t},!1,"setSaving"),setActiveTab:t=>e({activeTab:t},!1,"setActiveTab"),setShowCreateForm:t=>e({showCreateForm:t},!1,"setShowCreateForm"),setShowEmbedModal:t=>e({showEmbedModal:t},!1,"setShowEmbedModal"),setIsEditMode:t=>e({isEditMode:t},!1,"setIsEditMode"),setAnalyticsLoading:t=>e({analyticsLoading:t},!1,"setAnalyticsLoading"),setUploading:t=>e({uploading:t},!1,"setUploading"),setCurrentUser:t=>e({currentUser:t},!1,"setCurrentUser"),setError:t=>e({error:t},!1,"setError"),setConnectionStatus:t=>e({connectionStatus:t},!1,"setConnectionStatus"),setOrgChatbots:t=>e({orgChatbots:t},!1,"setOrgChatbots"),setSelectedChatbot:t=>e({selectedChatbot:t},!1,"setSelectedChatbot"),setUploads:t=>e({uploads:t},!1,"setUploads"),setEmbedCode:t=>e({embedCode:t},!1,"setEmbedCode"),setPerformanceMetrics:t=>e({performanceMetrics:t},!1,"setPerformanceMetrics"),setDeletingChatbotId:t=>e({deletingChatbotId:t},!1,"setDeletingChatbotId"),setConversations:t=>e({conversations:t},!1,"setConversations"),setChatMessages:t=>e({chatMessages:t},!1,"setChatMessages"),setCurrentConversationId:t=>e({currentConversationId:t},!1,"setCurrentConversationId"),setContextConfig:t=>e({contextConfig:t},!1,"setContextConfig"),updateContextConfig:t=>e(e=>({contextConfig:{...e.contextConfig,...t}}),!1,"updateContextConfig"),setConfig:t=>e({config:t},!1,"setConfig"),updateConfig:t=>e(e=>({config:{...e.config,...t}}),!1,"updateConfig"),loadChatbots:async()=>{try{e({loading:!0,error:null});let t=await r.Ex.getChatbots();e({orgChatbots:t,loading:!1,connectionStatus:"connected"})}catch(a){let o=a instanceof Error&&(a.message.includes("Unable to connect")||a.message.includes("Backend server unavailable")||a.message.includes("ECONNREFUSED")||a.message.includes("Not authenticated")),n=t();n.orgChatbots&&n.orgChatbots.length;console.error("Error loading chatbots:",a),e({error:o?"Backend server unavailable":"Failed to load chatbots",loading:!1,connectionStatus:"disconnected"}),i.oR.error("Failed to load chatbots. Please check your connection.")}},loadUploads:async()=>{try{let t=await r.uploadsApi.getUploads();e({uploads:t,connectionStatus:"connected"})}catch(o){let t=o instanceof Error&&(o.message.includes("Unable to connect")||o.message.includes("Backend server unavailable")||o.message.includes("ECONNREFUSED"));console.error("Error loading uploads:",o),e({error:t?"Backend server unavailable":"Failed to load uploads",connectionStatus:"disconnected"}),i.oR.error("Failed to load knowledge base files.")}},loadContextConfig:async()=>{try{let t=await r.kQ.getContextConfig();t&&t.success&&e({contextConfig:t.config,connectionStatus:"connected"})}catch(t){console.error("Error loading context config:",t),e({error:"Failed to load context configuration",connectionStatus:"disconnected"}),i.oR.error("Failed to load AI configuration.")}},loadPerformanceMetrics:async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7;try{e({analyticsLoading:!0});let o=await r.kQ.getAnalyticsDashboard(t);e({performanceMetrics:o,analyticsLoading:!1,connectionStatus:"connected"})}catch(t){console.error("Error loading performance metrics:",t),e({performanceMetrics:null,analyticsLoading:!1,error:"Failed to load analytics",connectionStatus:"disconnected"})}},createChatbot:async t=>{try{e({saving:!0,error:null});let o=await r.Ex.createChatbot(t);return e(e=>({orgChatbots:[...e.orgChatbots,o],selectedChatbot:o,saving:!1,showCreateForm:!1,isEditMode:!0,connectionStatus:"connected"})),i.oR.success("Chatbot created successfully!"),o}catch(o){console.error("Error creating chatbot:",o),e({saving:!1,error:"Failed to create chatbot",connectionStatus:"disconnected"});let t=o instanceof Error?o.message:"Failed to create chatbot. Please try again.";return i.oR.error(t),null}},updateChatbot:async(t,o)=>{try{e({saving:!0,error:null});let n=await r.Ex.updateChatbot(t,o);return e(e=>({orgChatbots:e.orgChatbots.map(e=>e.id===t?n:e),selectedChatbot:n,saving:!1,connectionStatus:"connected"})),i.oR.success("Chatbot updated successfully!"),n}catch(o){console.error("Error updating chatbot:",o),e({saving:!1,error:"Failed to update chatbot",connectionStatus:"disconnected"});let t=o instanceof Error?o.message:"Failed to update chatbot. Please try again.";return i.oR.error(t),null}},deleteChatbot:async t=>{try{e({deletingChatbotId:t,error:null}),await r.Ex.deleteChatbot(t),e(e=>{var o;return{orgChatbots:e.orgChatbots.filter(e=>e.id!==t),selectedChatbot:(null==(o=e.selectedChatbot)?void 0:o.id)===t?null:e.selectedChatbot,deletingChatbotId:null,connectionStatus:"connected"}}),i.oR.success("Chatbot deleted successfully!")}catch(t){console.error("Error deleting chatbot:",t),e({deletingChatbotId:null,error:"Failed to delete chatbot",connectionStatus:"disconnected"}),i.oR.error("Failed to delete chatbot. Please try again.")}},saveContextConfig:async t=>{try{e({saving:!0,error:null});let o=await r.kQ.updateContextConfig(t);if(o&&o.success)e(e=>({contextConfig:{...e.contextConfig,...t},saving:!1,connectionStatus:"connected"})),i.oR.success("Context configuration updated successfully!");else throw Error((null==o?void 0:o.message)||"Save failed")}catch(o){console.error("Error saving context config:",o),e({saving:!1,error:"Failed to update context configuration",connectionStatus:"disconnected"});let t=o instanceof Error?"Failed to save: ".concat(o.message):"Failed to update context configuration. Please try again.";i.oR.error(t)}},uploadFile:async(t,o)=>{try{e({uploading:!0,error:null});let n=await r.uploadsApi.uploadFile(t,o);return e(e=>({uploads:[...e.uploads,n],uploading:!1,connectionStatus:"connected"})),i.oR.success("File uploaded successfully!"),n}catch(t){return console.error("Error uploading file:",t),e({uploading:!1,error:"Failed to upload file",connectionStatus:"disconnected"}),i.oR.error("Failed to upload file. Please try again."),null}},testConnection:async()=>{try{e({connectionStatus:"checking"});try{if(await r.kQ.getHealthCheck()){let t=(await r.kQ.testConnection()).success;return e({connectionStatus:t?"connected":"disconnected"}),t}}catch(e){console.warn("Health check failed, trying direct connection test:",e)}let t=(await r.kQ.testConnection()).success;return e({connectionStatus:t?"connected":"disconnected"}),t}catch(t){return console.error("Connection test failed:",t),e({connectionStatus:"disconnected"}),!1}},generateEmbedCode:t=>{let o="<script>\n  (function() {\n    var script = document.createElement('script');\n    script.src = '".concat(window.location.origin,"/chatbot-widget.js';\n    script.setAttribute('data-chatbot-id', '").concat(t,"');\n    script.setAttribute('data-api-url', '").concat("http://localhost:8001","');\n    document.head.appendChild(script);\n  })();\n<\/script>");return e({embedCode:o,showEmbedModal:!0}),o},initializeStore:async function(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;try{let n;e({loading:!0,error:null,connectionStatus:"checking"});try{n=await t().testConnection()}catch(e){console.warn("Initial connection test failed, attempting to continue:",e),n=!1}let a=await Promise.allSettled([r.Ex.getChatbots(),r.uploadsApi.getUploads(),r.kQ.getContextConfig()]),c=!1,l=0;if("fulfilled"===a[0].status?(e({orgChatbots:a[0].value}),c=!0):(console.error("Failed to load chatbots:",a[0].reason),l++),"fulfilled"===a[1].status?(e({uploads:a[1].value}),c=!0):console.warn("Failed to load uploads (non-critical):",a[1].reason),"fulfilled"===a[2].status&&a[2].value&&a[2].value.success){let t={...a[2].value.config,org_id:a[2].value.config.org_id||"user_".concat(Date.now(),"_org")};e({contextConfig:t}),console.debug("âœ… Context config loaded successfully"),c=!0}else{console.debug("\uD83D\uDD27 Context config not available, using built-in defaults");let t={...s,org_id:"user_".concat(Date.now(),"_org")};e({contextConfig:t})}if(c&&0===l)e({loading:!1,connectionStatus:n?"connected":"partial",error:null}),n||i.oR.warning("Some features may be limited due to connectivity issues");else if(c&&l>0&&o<3)return console.log("Retrying initialization (".concat(o+1,"/").concat(3,") due to critical failures")),await new Promise(e=>setTimeout(e,1e3*Math.pow(2,o))),t().initializeStore(o+1);else if(!c&&o<3)return console.log("Retrying initialization (".concat(o+1,"/").concat(3,") due to complete failure")),await new Promise(e=>setTimeout(e,1e3*Math.pow(2,o))),t().initializeStore(o+1);else throw Error("Failed to load critical application data after ".concat(o+1," attempts"))}catch(n){if(console.error("Error initializing store:",n),o<3&&n instanceof Error&&(n.message.includes("network")||n.message.includes("timeout")||n.message.includes("fetch")))return console.log("Retrying initialization (".concat(o+1,"/").concat(3,") after error:"),n.message),await new Promise(e=>setTimeout(e,1500*Math.pow(2,o))),t().initializeStore(o+1);e({loading:!1,error:"Failed to initialize application".concat(o>0?" after ".concat(o+1," attempts"):""),connectionStatus:"disconnected"}),i.oR.error("Failed to initialize application. Please check your connection and try refreshing the page.")}},resetState:()=>e({loading:!0,saving:!1,activeTab:"basic",showCreateForm:!1,showEmbedModal:!1,isEditMode:!1,analyticsLoading:!1,uploading:!1,currentUser:null,error:null,connectionStatus:"checking",orgChatbots:[],selectedChatbot:null,uploads:[],embedCode:"",performanceMetrics:null,conversations:[],deletingChatbotId:null,contextConfig:s,config:c,chatMessages:[],currentConversationId:null},!1,"resetState")}),{name:"customize-store"}))},8332:(e,t,o)=>{o.d(t,{Fc:()=>s,TN:()=>c});var n=o(5155);o(2115);var a=o(3101),r=o(4269);let i=(0,a.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function s(e){let{className:t,variant:o,...a}=e;return(0,n.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,r.cn)(i({variant:o}),t),...a})}function c(e){let{className:t,...o}=e;return(0,n.jsx)("div",{"data-slot":"alert-description",className:(0,r.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...o})}}}]);
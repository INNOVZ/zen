exports.id=775,exports.ids=[775],exports.modules={3175:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/jithinjacob/Desktop/zaakiy/frontend/src/components/ClientOnlyWrapper.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jithinjacob/Desktop/zaakiy/frontend/src/components/ClientOnlyWrapper.tsx","default")},17235:(a,b,c)=>{"use strict";c.d(b,{SubscriptionProvider:()=>e});var d=c(97954);let e=(0,d.registerClientReference)(function(){throw Error("Attempted to call SubscriptionProvider() from the server but SubscriptionProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jithinjacob/Desktop/zaakiy/frontend/src/contexts/SubscriptionContext.tsx","SubscriptionProvider");(0,d.registerClientReference)(function(){throw Error("Attempted to call useSubscription() from the server but useSubscription is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jithinjacob/Desktop/zaakiy/frontend/src/contexts/SubscriptionContext.tsx","useSubscription"),(0,d.registerClientReference)(function(){throw Error("Attempted to call useTokenEstimation() from the server but useTokenEstimation is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jithinjacob/Desktop/zaakiy/frontend/src/contexts/SubscriptionContext.tsx","useTokenEstimation"),(0,d.registerClientReference)(function(){throw Error("Attempted to call useSubscriptionLimits() from the server but useSubscriptionLimits is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jithinjacob/Desktop/zaakiy/frontend/src/contexts/SubscriptionContext.tsx","useSubscriptionLimits")},21191:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/jithinjacob/Desktop/zaakiy/frontend/src/components/dashboard/layout/SideBar.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jithinjacob/Desktop/zaakiy/frontend/src/components/dashboard/layout/SideBar.tsx","default")},28992:(a,b,c)=>{Promise.resolve().then(c.bind(c,96673)),Promise.resolve().then(c.bind(c,3175)),Promise.resolve().then(c.bind(c,21191)),Promise.resolve().then(c.bind(c,25825)),Promise.resolve().then(c.bind(c,17235))},29889:(a,b,c)=>{"use strict";c.d(b,{Rs:()=>j,SubscriptionProvider:()=>i});var d=c(21124),e=c(38301),f=c(85436),g=c(12751);let h=(0,e.createContext)(void 0),i=({children:a})=>{let[b,c]=(0,e.useState)(null),[i,j]=(0,e.useState)(null),[k,l]=(0,e.useState)(!0),[m,n]=(0,e.useState)(null);(0,e.useEffect)(()=>{(async()=>{try{let a=await f.k.getPlans();j(a)}catch(a){console.error("Failed to load subscription plans:",a),n("Failed to load subscription plans")}})()},[]),(0,e.useEffect)(()=>{let a=async()=>{try{l(!0),n(null);let{userId:a,orgId:b}=await (0,g.F)(),d=await f.k.getSubscriptionStatus(b?"organization":"user",b||a);c(d)}catch(a){console.error("Failed to load subscription status:",a),a instanceof Error&&!a.message.includes("Not authenticated")&&n("Failed to load subscription status")}finally{l(!1)}};a();let b=setInterval(a,3e4);return()=>clearInterval(b)},[]);let o=async()=>{try{n(null);let{userId:a,orgId:b}=await (0,g.F)(),d=await f.k.getSubscriptionStatus(b?"organization":"user",b||a);c(d)}catch(a){console.error("Failed to refresh subscription status:",a),n("Failed to refresh subscription status")}},p=async a=>{try{let{userId:b,orgId:c}=await (0,g.F)();return await f.k.checkTokenAvailability(c?"organization":"user",c||b,a)}catch(a){throw console.error("Failed to check token availability:",a),a}},q=async a=>{try{let b=await f.k.consumeTokens(a);return await o(),b}catch(a){throw console.error("Failed to consume tokens:",a),a}};return(0,d.jsx)(h.Provider,{value:{subscription:b,plans:i,isLoading:k,error:m,refreshSubscription:o,checkTokenAvailability:p,consumeTokens:q},children:a})},j=()=>{let a=(0,e.useContext)(h);if(void 0===a)throw Error("useSubscription must be used within a SubscriptionProvider");return a}},30057:(a,b,c)=>{"use strict";c.d(b,{k:()=>g});var d=c(21124);c(38301);var e=c(23479),f=c(44943);function g({className:a,value:b,...c}){return(0,d.jsx)(e.bL,{"data-slot":"progress",className:(0,f.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",a),...c,children:(0,d.jsx)(e.C1,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(b||0)}%)`}})})}},31200:(a,b,c)=>{"use strict";c.d(b,{default:()=>p});var d=c(21124),e=c(38301),f=c(71179),g=c(55056),h=c(85351),i=c(51881),j=c(47089),k=c(10578),l=c(71563),m=c(35284),n=c(93758),o=c(54659);function p({position:a="bottom-right",chatbotId:b,showChatbotSelector:c=!1}){let[p,q]=(0,e.useState)(!1),[r,s]=(0,e.useState)(!1),[t,u]=(0,e.useState)([]),[v,w]=(0,e.useState)(""),[x,y]=(0,e.useState)(!1),[z,A]=(0,e.useState)(),[B,C]=(0,e.useState)([]),[D,E]=(0,e.useState)(null),[F,G]=(0,e.useState)(!0),[H,I]=(0,e.useState)(!1),[J,K]=(0,e.useState)(null),[L,M]=(0,e.useState)(!1),N=(0,e.useRef)(null),{getErrorMessage:O}=function(){let a=(0,e.useCallback)(a=>a instanceof Error&&(a.message.includes("Unable to connect")||a.message.includes("server unavailable")||a.message.includes("ECONNREFUSED")||a.message.includes("network")||a.message.includes("timeout")),[]),b=(0,e.useCallback)(b=>b instanceof Error?a(b)?"Unable to connect to server. Please check if the backend service is running and try again.":b.message.includes("Not authenticated")||b.message.includes("Authentication expired")?"Your session has expired. Please log in again.":b.message.includes("Access denied")||b.message.includes("Unauthorized")?"You don't have permission to perform this action.":b.message.includes("timeout")?"The request timed out. Please try again.":b.message||"An unexpected error occurred":"An unexpected error occurred",[a]);return{isConnectionError:a,getErrorMessage:b}}(),P=async a=>{try{let b=await o.Ex.getChatbot(a);E(b),A(void 0),u([{id:"greeting",type:"bot",content:b.greeting_message||`Hello! I'm ${b.name}. How can I help you today?`,timestamp:new Date}]),I(!1)}catch(a){console.error("Error switching chatbot:",a)}},Q=async()=>{if(!v.trim()||x||!J)return;let a={id:Date.now().toString(),type:"user",content:v,timestamp:new Date};u(b=>[...b,a]),w(""),y(!0);try{let a=await o.kQ.sendMessage(v,D?.id||b,z);a.conversation_id&&!z&&A(a.conversation_id);let c={id:(Date.now()+1).toString(),type:"bot",content:a.response,timestamp:new Date,sources:a.sources||[]};u(a=>[...a,c])}catch(c){console.error("Error getting bot response:",c),c instanceof Error&&(c.message.includes("Not authenticated")||c.message.includes("Authentication expired"))&&K(!1);let a=O(c),b={id:(Date.now()+1).toString(),type:"bot",content:a,timestamp:new Date};u(a=>[...a,b])}finally{y(!1)}},R={"bottom-right":"bottom-10 right-4","bottom-left":"bottom-10 left-4"};return L?p?(0,d.jsx)("div",{className:`fixed ${R[a]} flex flex-col p-0 z-50`,children:(0,d.jsxs)("div",{className:`w-[25vw] flex flex-col shadow-2xl rounded-lg p-3 transition-all bg-white m-0 duration-300 ${r?"h-14":"h-[70vh]"}`,children:[(0,d.jsx)("div",{className:"flex-row items-center justify-between space-y-0 p-3 text-white rounded-lg shadow-md",style:{background:D?.color_hex?`linear-gradient(135deg, ${D.color_hex}, ${D.color_hex}dd)`:"linear-gradient(135deg, #3B82F6, #2563EB)"},children:(0,d.jsxs)("div",{className:"flex flex-row justify-between items-center gap-5 flex-1",children:[(0,d.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,d.jsx)("div",{className:"w-6 h-6 rounded-full flex flex-row items-center justify-center bg-white/20",children:D?.avatar_url?(0,d.jsx)("img",{src:D.avatar_url,alt:D.name,className:"w-5 h-5 rounded-full"}):(0,d.jsx)(g.A,{className:"h-4 w-4 text-white"})}),c&&B.length>1?(0,d.jsxs)("div",{className:"relative gap-3",children:[(0,d.jsxs)(m.$,{variant:"ghost",size:"sm",onClick:()=>I(!H),className:"h-auto p-1 text-white hover:bg-white/20 flex items-center gap-1",children:[(0,d.jsx)("span",{className:"font-medium text-sm",children:D?.name||"Select Chatbot"}),(0,d.jsx)(h.A,{className:"h-3 w-3"})]}),H&&(0,d.jsx)("div",{className:"absolute top-full left-0 mt-1 bg-white rounded-md shadow-lg border z-10 min-w-48",children:B.map(a=>(0,d.jsxs)("button",{onClick:()=>P(a.id),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center gap-2",children:[(0,d.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:a.color_hex||"#3B82F6"}}),(0,d.jsx)("span",{children:a.name}),"active"===a.chain_status&&(0,d.jsx)("span",{className:"text-xs text-green-600 ml-auto",children:"Active"})]},a.id))})]}):(0,d.jsx)("span",{className:"font-medium text-sm",children:D?.name||"Assistant"}),(0,d.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full"})]}),(0,d.jsxs)("span",{className:"flex items-center gap-3",children:[(0,d.jsx)(m.$,{variant:"ghost",size:"sm",onClick:()=>s(!r),className:"pointer h-7 w-7 rounded-lg p-0 text-white bg-white/20",children:(0,d.jsx)(i.A,{className:"h-3 w-3"})}),(0,d.jsx)(m.$,{variant:"ghost",size:"sm",onClick:()=>q(!1),className:"pointer h-7 w-7 rounded-lg p-0 bg-white",children:(0,d.jsx)(j.A,{className:"h-3 w-3",style:{color:D?.color_hex}})})," "]})]})}),!r&&(0,d.jsxs)("div",{className:"relative flex-1 flex flex-col overflow-scroll",children:[(0,d.jsxs)("div",{className:"flex-1 overflow-y-auto p-3 space-y-3",children:[!1===J&&(0,d.jsx)("div",{className:"text-center py-4",children:(0,d.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,d.jsx)(g.A,{className:"h-8 w-8 text-blue-500 mx-auto mb-2"}),(0,d.jsx)("h3",{className:"font-medium text-blue-900 mb-2",children:"Login Required"}),(0,d.jsx)("p",{className:"text-sm text-blue-700 mb-3",children:"Please log in to your account to start chatting with our AI assistant."}),(0,d.jsx)(m.$,{size:"sm",onClick:()=>window.location.href="/login",className:"bg-blue-600 hover:bg-blue-700",children:"Go to Login"})]})}),t.map(a=>(0,d.jsx)("div",{className:`flex ${"user"===a.type?"justify-end":"justify-start"}`,children:(0,d.jsx)("div",{className:`max-w-[85%] p-2 rounded-lg text-sm ${"user"===a.type?"text-white ml-2":"bg-gray-100 mr-2"}`,style:{backgroundColor:"user"===a.type?D?.color_hex||"#3B82F6":void 0},children:(0,d.jsxs)("div",{className:"flex items-start gap-2",children:["bot"===a.type&&(0,d.jsx)(g.A,{className:"h-3 w-3 text-blue-500 mt-0.5 flex-shrink-0"}),"user"===a.type&&(0,d.jsx)(k.A,{className:"h-3 w-3 text-white mt-0.5 flex-shrink-0"}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("p",{className:"whitespace-pre-wrap",children:a.content}),a.sources&&a.sources.length>0&&(0,d.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:["Sources: ",a.sources.length," document(s)"]})]})]})})},a.id)),x&&(0,d.jsx)("div",{className:"flex justify-start",children:(0,d.jsx)("div",{className:"bg-gray-100 mr-2 p-2 rounded-lg max-w-[85%]",children:(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(g.A,{className:"h-3 w-3 text-blue-500"}),(0,d.jsxs)("div",{className:"flex gap-1",children:[(0,d.jsx)("div",{className:"w-1.5 h-1.5 bg-gray-400 rounded-full animate-bounce"}),(0,d.jsx)("div",{className:"w-1.5 h-1.5 bg-gray-400 rounded-full animate-bounce delay-100"}),(0,d.jsx)("div",{className:"w-1.5 h-1.5 bg-gray-400 rounded-full animate-bounce delay-200"})]})]})})}),(0,d.jsx)("div",{ref:N})]}),(0,d.jsxs)("div",{className:"p-2 border-t bg-gray-50 ",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(n.p,{value:v,onChange:a=>w(a.target.value),onKeyDown:a=>{"Enter"!==a.key||a.shiftKey||(a.preventDefault(),Q())},placeholder:J?`Ask ${D?.name||"Assistant"}...`:"Please log in to chat...",className:"flex-1 text-sm focus:ring-1 focus:ring-opacity-50 focus:border-transparent transition-all duration-200",style:{"--tw-ring-color":D?.color_hex||"#3B82F6"},disabled:x||!D||!J}),(0,d.jsx)(m.$,{onClick:Q,disabled:!v.trim()||x||!D||!J,size:"sm",className:"px-3",style:{backgroundColor:D?.color_hex||"#3B82F6"},children:(0,d.jsx)(l.A,{className:"h-3 w-3"})})]}),(0,d.jsx)("p",{className:"mt-3 text-xs text-right",children:"Powered by Zaakiy"})]})]})]})}):(0,d.jsx)("div",{className:`fixed ${R[a]} z-50`,children:(0,d.jsx)(m.$,{onClick:()=>q(!0),className:"pointer rounded-full w-14 h-14 shadow-lg hover:shadow-xl transition-all duration-200",style:{backgroundColor:D?.color_hex||"#3B82F6"},disabled:F,children:F?(0,d.jsx)("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,d.jsx)(f.A,{className:"h-6 w-6 text-white"})})}):null}},48940:(a,b,c)=>{"use strict";c.d(b,{N:()=>d,d:()=>e});let d=a=>a&&(a.display_name||a.name||a.email)||"User",e=a=>{let b=d(a);return b.includes("@")?"User":b.split(" ")[0]}},55273:(a,b,c)=>{"use strict";c.d(b,{default:()=>f});var d=c(21124),e=c(38301);function f({children:a,fallback:b=null}){let[c,f]=(0,e.useState)(!1);return c?(0,d.jsx)(d.Fragment,{children:a}):(0,d.jsx)(d.Fragment,{children:b})}},57723:(a,b,c)=>{"use strict";c.d(b,{T:()=>o});var d=c(21124);c(38301);var e=c(62186),f=c(30057),g=c(99187),h=c(35284),i=c(16945),j=c(25345),k=c(72567),l=c(67748),m=c(29889),n=c(44943);let o=({className:a,showRefreshButton:b=!0,compact:c=!1})=>{let{subscription:o,isLoading:p,error:q,refreshSubscription:r}=(0,m.Rs)();if(p)return(0,d.jsx)(e.Zp,{className:(0,n.cn)("w-full",a),children:(0,d.jsx)(e.Wu,{className:"p-6",children:(0,d.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,d.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,d.jsx)("div",{className:"h-2 bg-gray-200 rounded"}),(0,d.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})})});if(q)return(0,d.jsx)(e.Zp,{className:(0,n.cn)("w-full",a),children:(0,d.jsx)(e.Wu,{className:"p-6",children:(0,d.jsxs)("div",{className:"flex items-center space-x-2 text-red-600",children:[(0,d.jsx)(i.A,{size:16}),(0,d.jsx)("span",{className:"text-sm",children:q}),b&&(0,d.jsx)(h.$,{variant:"ghost",size:"sm",onClick:r,className:"ml-auto",children:(0,d.jsx)(j.A,{size:14})})]})})});if(!o)return(0,d.jsx)(e.Zp,{className:(0,n.cn)("w-full",a),children:(0,d.jsx)(e.Wu,{className:"p-6",children:(0,d.jsx)("div",{className:"text-center text-gray-500",children:(0,d.jsx)("p",{className:"text-sm",children:"No subscription found"})})})});let s=o.usage_percentage,t=s>=80,u=s>=95,v=()=>u?(0,d.jsx)(g.E,{variant:"destructive",className:"text-xs",children:"Critical"}):t?(0,d.jsx)(g.E,{variant:"secondary",className:"text-xs",children:"Warning"}):(0,d.jsx)(g.E,{variant:"outline",className:"text-xs",children:"Healthy"}),w=a=>new Intl.NumberFormat().format(a);return c?(0,d.jsxs)("div",{className:(0,n.cn)("flex items-center space-x-3",a),children:[(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,d.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Token Usage"}),v()]}),(0,d.jsx)(f.k,{value:s,className:"h-2",style:{backgroundColor:"#f3f4f6"}}),(0,d.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,d.jsx)("span",{children:w(o.tokens_used_this_month)}),(0,d.jsx)("span",{children:w(o.monthly_limit)})]})]}),b&&(0,d.jsx)(h.$,{variant:"ghost",size:"sm",onClick:r,className:"flex-shrink-0",children:(0,d.jsx)(j.A,{size:14})})]}):(0,d.jsxs)(e.Zp,{className:(0,n.cn)("w-full",a),children:[(0,d.jsx)(e.aR,{className:"pb-3",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)(e.ZB,{className:"text-lg font-semibold",children:"Token Usage"}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[v(),b&&(0,d.jsx)(h.$,{variant:"ghost",size:"sm",onClick:r,children:(0,d.jsx)(j.A,{size:16})})]})]})}),(0,d.jsxs)(e.Wu,{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,d.jsx)("span",{className:"text-gray-600",children:"This Month"}),(0,d.jsxs)("span",{className:"font-medium",children:[s.toFixed(1),"%"]})]}),(0,d.jsx)(f.k,{value:s,className:"h-3",style:{backgroundColor:"#f3f4f6"}}),(0,d.jsxs)("div",{className:"flex justify-between text-sm text-gray-500",children:[(0,d.jsxs)("span",{children:[w(o.tokens_used_this_month)," used"]}),(0,d.jsxs)("span",{children:[w(o.tokens_remaining)," remaining"]})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-2 border-t",children:[(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:w(o.monthly_limit)}),(0,d.jsx)("div",{className:"text-xs text-gray-500",children:"Monthly Limit"})]}),(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-green-600",children:w(o.tokens_remaining)}),(0,d.jsx)("div",{className:"text-xs text-gray-500",children:"Remaining"})]})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500 pt-2 border-t",children:[(0,d.jsx)(k.A,{size:14}),(0,d.jsxs)("span",{children:["Resets on ",new Date(o.reset_date).toLocaleDateString()]})]}),t&&(0,d.jsx)("div",{className:(0,n.cn)("p-3 rounded-lg text-sm",u?"bg-red-50 text-red-700 border border-red-200":"bg-yellow-50 text-yellow-700 border border-yellow-200"),children:(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(i.A,{size:16}),(0,d.jsx)("span",{children:u?"You've reached your token limit. Upgrade your plan to continue.":"You're approaching your token limit. Consider upgrading your plan."})]})}),o.tokens_used_this_month>0&&(0,d.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500 pt-2 border-t",children:[(0,d.jsx)(l.A,{size:14}),(0,d.jsx)("span",{children:o.tokens_used_this_month>.5*o.monthly_limit?"High usage this month":"Normal usage this month"})]})]})]})}},68895:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>k,metadata:()=>j});var d=c(75338);c(61135);var e=c(21191),f=c(25825),g=c(17235),h=c(96673),i=c(3175);let j={title:"Zentria | Console",description:""};async function k({children:a}){return(0,d.jsx)(g.SubscriptionProvider,{children:(0,d.jsxs)("div",{className:"min-h-screen bg-gradient-to-r from-[#5d7dde30] to-[#60a5fa49] p-5",children:[(0,d.jsx)(e.default,{}),(0,d.jsx)(f.Toaster,{}),a,(0,d.jsx)(i.default,{children:(0,d.jsx)(h.default,{position:"bottom-right",showChatbotSelector:!0})})]})})}},69705:(a,b,c)=>{"use strict";c.d(b,{default:()=>x});var d=c(21124),e=c(38301),f=c(3991),g=c.n(f),h=c(42378),i=c(78733),j=c(60073),k=c(41899),l=c(14343),m=c(94684),n=c(59405),o=c(8294),p=c(10578),q=c(19710),r=c(76104),s=c(70798),t=c(35284),u=c(42830),v=c(48940),w=c(57723);let x=()=>{let[a,b]=(0,e.useState)(!0),[c,f]=(0,e.useState)(null),x=(0,h.usePathname)(),y=(0,h.useParams)();(0,e.useEffect)(()=>{(async()=>{let{data:{session:a}}=await s.N.auth.getSession();a?.user&&f(a.user)})()},[]);let z=y?.userId||c?.id,A=a=>z?`/dashboard/${z}${a}`:`/dashboard${a}`,B=[{title:"Dashboard",icon:(0,d.jsx)(i.A,{size:20}),path:A("")},{title:"Train",icon:(0,d.jsx)(j.A,{size:20}),path:A("/train")},{title:"AI",icon:(0,d.jsx)(k.A,{size:20}),path:A("/ai")},{title:"Customize",icon:(0,d.jsx)(r.bAt,{size:20}),path:A("/customize")},{title:"Subscription",icon:(0,d.jsx)(l.A,{size:20}),path:A("/subscription")},{title:"Settings",icon:(0,d.jsx)(m.A,{size:20}),path:A("/settings")}],C=async()=>{let{error:a}=await s.N.auth.signOut();a?u.oR.error("Error logging out"):(u.oR.success("Logged out successfully"),window.location.href="/auth/login")};return(0,d.jsxs)("div",{className:`${a?"w-[4.5vw]":"sm:w-60 w-60 z-[999]"} min-h-screen bg-[#5D7DDE] text-white transition-all-ease-in-out duration-400 fixed left-0 top-0 flex flex-col`,children:[(0,d.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-white",children:[!a&&(0,d.jsx)("span",{className:"text-xl font-bold text-white",children:"Zentria Pro"}),(0,d.jsx)("button",{onClick:()=>b(!a),className:"p-2 rounded-lg pointer",children:a?(0,d.jsx)(n.A,{size:20,color:"#fff"}):(0,d.jsx)(o.A,{size:20,color:"#fff"})})]}),!a&&c&&(0,d.jsx)("div",{className:"p-4 border-b border-white",children:(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:(0,d.jsx)(p.A,{size:16,className:"text-white"})}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("p",{className:"text-sm font-medium text-white truncate",children:(0,v.N)({id:c.id,email:c.email||"",name:c.user_metadata?.name||"",display_name:c.user_metadata?.display_name||""})}),(0,d.jsxs)("p",{className:"text-xs text-white",children:["User ID: ",c.id.slice(0,8),"..."]})]})]})}),(0,d.jsx)("nav",{className:"p-4 flex-1",children:(0,d.jsx)("ul",{className:"space-y-2",children:B.map((b,c)=>{let e=b.path.replace(/\/$/,""),f=x.replace(/\/$/,""),h=!1,i=f.split("/").filter(Boolean),j=e.split("/").filter(Boolean);return h="Dashboard"===b.title?2===i.length&&"dashboard"===i[0]&&void 0!==i[1]&&void 0===i[2]:i[i.length-1]===j[j.length-1],(0,d.jsx)("li",{children:(0,d.jsxs)(g(),{href:b.path,className:`flex items-center gap-4 p-2 rounded-lg transition-colors
                    ${h?"glass shadow-sm text-white font-bold":"text-white hover:text-white"}
                  `,children:[b.icon,!a&&(0,d.jsx)("span",{className:"text-base font-semibold",children:b.title})]})},c)})})}),!a&&(0,d.jsx)("div",{className:"p-4 border-t border-gray-700",children:(0,d.jsx)(w.T,{compact:!0,showRefreshButton:!1})}),(0,d.jsx)("div",{className:"p-4 border-t border-gray-700",children:(0,d.jsxs)(t.$,{onClick:C,variant:"ghost",className:`w-full justify-start text-gray-600 hover:text-white hover:bg-red-500 ${a?"px-2":""}`,children:[(0,d.jsx)(q.A,{size:20}),!a&&(0,d.jsx)("span",{className:"ml-4",children:"Logout"})]})})]})}},70798:(a,b,c)=>{"use strict";c.d(b,{N:()=>d});let d=(0,c(39572).UU)("https://raoonyyrzzftdenvknfi.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJhb29ueXlyenpmdGRlbnZrbmZpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAyNDM1NzcsImV4cCI6MjA2NTgxOTU3N30.3t9rTN6x533lihs8ebUVHu9kuayFl_m2b6liifW1B88")},85436:(a,b,c)=>{"use strict";c.d(b,{k:()=>g});var d=c(12751),e=c(19074);let f="http://localhost:8001",g={getPlans:async()=>{let a=(0,e.O)("/api/onboarding/plans"),b=e.n.get(a);if(b)return b;try{let b=await fetch(`${f}/api/onboarding/plans`);if(!b.ok)throw Error(`Failed to fetch plans: ${b.status}`);let c=await b.json(),d=c.plans||c;return e.n.set(a,d,36e5),d}catch(c){console.error("Error fetching subscription plans:",c);let b={basic:{name:"Basic Plan",monthly_token_limit:1e4,price_per_month:29.99,max_chatbots:3,max_documents_per_chatbot:50,priority_support:!1,custom_branding:!1,api_access:!1,analytics_retention_days:30},professional:{name:"Professional Plan",monthly_token_limit:5e4,price_per_month:99.99,max_chatbots:10,max_documents_per_chatbot:200,priority_support:!0,custom_branding:!0,api_access:!0,analytics_retention_days:90},enterprise:{name:"Enterprise Plan",monthly_token_limit:2e5,price_per_month:299.99,max_chatbots:50,max_documents_per_chatbot:1e3,priority_support:!0,custom_branding:!0,api_access:!0,analytics_retention_days:365}};return e.n.set(a,b,3e5),b}},signup:async a=>{try{let b=new AbortController,c=setTimeout(()=>b.abort(),3e4),d=await fetch(`${f}/api/onboarding/admin/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a),signal:b.signal});if(clearTimeout(c),!d.ok){let a=await d.json();throw Error(a.detail||`Signup failed: ${d.status}`)}return await d.json()}catch(a){if(console.error("Error during signup:",a),a instanceof Error&&"AbortError"===a.name)throw Error("Request timed out. Please check if the server is running.");throw a}},getSubscriptionStatus:async(a,b)=>{let c=(0,e.O)(`/api/onboarding/subscription/${a}/${b}`),d=e.n.get(c);if(d)return d;try{let d=await fetch(`${f}/api/onboarding/subscription/${a}/${b}`);if(!d.ok)throw Error(`Failed to fetch subscription status: ${d.status}`);let g=await d.json();return e.n.set(c,g,3e4),g}catch(b){console.error("Error fetching subscription status:",b);let a={subscription_id:"mock-subscription-id",tokens_used_this_month:2500,tokens_remaining:7500,monthly_limit:1e4,usage_percentage:25,reset_date:new Date(Date.now()+2592e6).toISOString()};return e.n.set(c,a,6e4),a}},consumeTokens:async a=>{try{let{token:b,userId:c,orgId:g}=await (0,d.F)(),h={"Content-Type":"application/json",Authorization:`Bearer ${b}`,"X-User-ID":c};g&&(h["X-Org-ID"]=g);let i=await fetch(`${f}/api/onboarding/tokens/consume`,{method:"POST",headers:h,body:JSON.stringify(a)});if(!i.ok){let a=await i.json();throw Error(a.detail||`Token consumption failed: ${i.status}`)}let j=await i.json();return e.n.deleteMatching("/api/onboarding/subscription"),j}catch(a){throw console.error("Error consuming tokens:",a),a}},checkTokenAvailability:async(a,b,c)=>{try{let d=await fetch(`${f}/api/onboarding/tokens/check/${a}/${b}/${c}`);if(!d.ok)throw Error(`Token availability check failed: ${d.status}`);return await d.json()}catch(a){return console.error("Error checking token availability:",a),{success:!0,has_enough_tokens:!0,tokens_required:c,tokens_available:7500,can_proceed:!0}}},getSupportedChannels:async()=>{let a=(0,e.O)("/api/onboarding/channels"),b=e.n.get(a);if(b)return b;try{let b=await fetch(`${f}/api/onboarding/channels`);if(!b.ok)throw Error(`Failed to fetch channels: ${b.status}`);let c=await b.json(),d=c.channels||c;return e.n.set(a,d,36e5),d}catch(c){console.error("Error fetching supported channels:",c);let b={website:{name:"Website Chat",description:"Embedded chat widget on websites",icon:"\uD83C\uDF10",typical_use_cases:["Customer support","Lead generation","FAQ"]},whatsapp:{name:"WhatsApp Business",description:"WhatsApp Business API integration",icon:"\uD83D\uDCF1",typical_use_cases:["Customer service","Order updates","Marketing"]},messenger:{name:"Facebook Messenger",description:"Facebook Messenger integration",icon:"\uD83D\uDCAC",typical_use_cases:["Social commerce","Customer support","Engagement"]},instagram:{name:"Instagram Direct",description:"Instagram Direct Messages integration",icon:"\uD83D\uDCF8",typical_use_cases:["Brand engagement","Product inquiries","Support"]},api:{name:"REST API",description:"API integration for custom applications",icon:"\uD83D\uDD0C",typical_use_cases:["Custom apps","System integration","Automation"]},mobile_app:{name:"Mobile App",description:"Mobile application integration",icon:"\uD83D\uDCF2",typical_use_cases:["In-app support","User onboarding","Feature guidance"]}};return e.n.set(a,b,36e5),b}},getChannelConfigurations:async a=>{let b=(0,e.O)(`/api/onboarding/subscription/${a}/channels/config`),c=e.n.get(b);if(c)return c;try{let c=await fetch(`${f}/api/onboarding/subscription/${a}/channels/config`);if(!c.ok)throw Error(`Failed to fetch channel configurations: ${c.status}`);let d=await c.json(),g=d.configurations||d;return e.n.set(b,g,3e5),g}catch(a){throw console.error("Error fetching channel configurations:",a),a}},updateChannelConfiguration:async(a,b,c)=>{try{let{token:g,userId:h,orgId:i}=await (0,d.F)(),j={"Content-Type":"application/json",Authorization:`Bearer ${g}`,"X-User-ID":h};i&&(j["X-Org-ID"]=i);let k=await fetch(`${f}/api/onboarding/subscription/${a}/channels/${b}/config`,{method:"PUT",headers:j,body:JSON.stringify(c)});if(!k.ok){let a=await k.json();throw Error(a.detail||`Channel configuration update failed: ${k.status}`)}let l=await k.json();return e.n.deleteMatching(`/api/onboarding/subscription/${a}/channels`),l}catch(a){throw console.error("Error updating channel configuration:",a),a}},getSubscriptionAnalytics:async(a,b=30)=>{if(!a)throw Error("Subscription ID is required");let c=(0,e.O)(`/api/onboarding/analytics/${a}?days_back=${b}`),d=e.n.get(c);if(d)return d;try{let d=new AbortController,g=setTimeout(()=>d.abort(),3e4),h=await fetch(`${f}/api/onboarding/analytics/${a}?days_back=${b}`,{signal:d.signal});if(clearTimeout(g),!h.ok){let a=(await h.json().catch(()=>({}))).detail||`Failed to fetch analytics: ${h.status}`;throw Error(a)}let i=await h.json(),j=i.analytics||i;return e.n.set(c,j,3e5),j}catch(a){if(console.error("Error fetching subscription analytics:",a),a instanceof Error&&"AbortError"===a.name)throw Error("Request timed out. Please check if the server is running.");throw a}},getChannelComparison:async(a,b=30)=>{let c=(0,e.O)(`/api/onboarding/analytics/${a}/channels/comparison?days_back=${b}`),d=e.n.get(c);if(d)return d;try{let d=await fetch(`${f}/api/onboarding/analytics/${a}/channels/comparison?days_back=${b}`);if(!d.ok)throw Error(`Failed to fetch channel comparison: ${d.status}`);let g=await d.json(),h=g.comparison||g;return e.n.set(c,h,3e5),h}catch(a){throw console.error("Error fetching channel comparison:",a),a}},getChannelTrends:async(a,b,c=30)=>{let d=(0,e.O)(`/api/onboarding/analytics/${a}/channels/${b}/trends?days_back=${c}`),g=e.n.get(d);if(g)return g;try{let g=await fetch(`${f}/api/onboarding/analytics/${a}/channels/${b}/trends?days_back=${c}`);if(!g.ok)throw Error(`Failed to fetch channel trends: ${g.status}`);let h=await g.json(),i=h.trends||h;return e.n.set(d,i,3e5),i}catch(a){throw console.error("Error fetching channel trends:",a),a}},estimateTokensForOperation:(a,b,c)=>{switch(a){case"chat":return 100+(b||0)/4;case"document_upload":return 500+(c||0)/100;case"document_processing":return 200;case"web_scraping":return 300;case"embedding_generation":return 50;default:return 100}},invalidateSubscriptionCache:()=>{e.n.deleteMatching("/api/onboarding"),console.log("Subscription cache invalidated")}}},92544:(a,b,c)=>{Promise.resolve().then(c.bind(c,31200)),Promise.resolve().then(c.bind(c,55273)),Promise.resolve().then(c.bind(c,69705)),Promise.resolve().then(c.bind(c,48911)),Promise.resolve().then(c.bind(c,29889))},93758:(a,b,c)=>{"use strict";c.d(b,{p:()=>f});var d=c(21124);c(38301);var e=c(44943);function f({className:a,type:b,...c}){return(0,d.jsx)("input",{type:b,"data-slot":"input",className:(0,e.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...c})}},96673:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/jithinjacob/Desktop/zaakiy/frontend/src/components/ChatWidget.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jithinjacob/Desktop/zaakiy/frontend/src/components/ChatWidget.tsx","default")}};